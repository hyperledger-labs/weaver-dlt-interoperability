<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-external/getting-started/test-network/ledger-initialization">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Ledger Initialization | Weaver: DLT Interoperability Framework</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hyperledger-labs.github.io/weaver-dlt-interoperability/docs/external/getting-started/test-network/ledger-initialization"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Ledger Initialization | Weaver: DLT Interoperability Framework"><meta data-rh="true" name="description" content="&lt;!--"><meta data-rh="true" property="og:description" content="&lt;!--"><link data-rh="true" rel="icon" href="/weaver-dlt-interoperability/shared/favicon.ico"><link data-rh="true" rel="canonical" href="https://hyperledger-labs.github.io/weaver-dlt-interoperability/docs/external/getting-started/test-network/ledger-initialization"><link data-rh="true" rel="alternate" href="https://hyperledger-labs.github.io/weaver-dlt-interoperability/docs/external/getting-started/test-network/ledger-initialization" hreflang="en"><link data-rh="true" rel="alternate" href="https://hyperledger-labs.github.io/weaver-dlt-interoperability/docs/external/getting-started/test-network/ledger-initialization" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/weaver-dlt-interoperability/blog/rss.xml" title="Weaver: DLT Interoperability Framework RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/weaver-dlt-interoperability/blog/atom.xml" title="Weaver: DLT Interoperability Framework Atom Feed"><link rel="stylesheet" href="/weaver-dlt-interoperability/assets/css/styles.26b1bc6d.css">
<link rel="preload" href="/weaver-dlt-interoperability/assets/js/runtime~main.45c04fde.js" as="script">
<link rel="preload" href="/weaver-dlt-interoperability/assets/js/main.4aa7da0c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/weaver-dlt-interoperability/"><div class="navbar__logo"><img src="/weaver-dlt-interoperability/shared/logo.svg" alt="Weaver" class="themedImage_ToTc themedImage--light_HNdA"><img src="/weaver-dlt-interoperability/shared/logo.svg" alt="Weaver" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Weaver</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/weaver-dlt-interoperability/docs/external/introduction">Docs</a><a class="navbar__item navbar__link" href="/weaver-dlt-interoperability/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hyperledger-labs/weaver-dlt-interoperability" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaver-dlt-interoperability/docs/external/introduction">Weaver Framework</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/weaver-dlt-interoperability/docs/external/getting-started/guide">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/weaver-dlt-interoperability/docs/external/getting-started/guide">Using Weaver</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/weaver-dlt-interoperability/docs/external/getting-started/test-network/overview">Launching a Test Network</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/weaver-dlt-interoperability/docs/external/getting-started/test-network/overview">Component Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/weaver-dlt-interoperability/docs/external/getting-started/test-network/setup-local">Setup with Locally Built Weaver Components</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/weaver-dlt-interoperability/docs/external/getting-started/test-network/setup-local-docker">Setup with Locally Built Dockerized Weaver Components</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/weaver-dlt-interoperability/docs/external/getting-started/test-network/setup-packages">Setup with Imported Weaver Components</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/weaver-dlt-interoperability/docs/external/getting-started/test-network/setup-packages-docker">Setup with Imported Dockerized Weaver Components</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/weaver-dlt-interoperability/docs/external/getting-started/test-network/ledger-initialization">Ledger Initialization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/weaver-dlt-interoperability/docs/external/getting-started/test-network/advanced-configuration">Advanced Configuration</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/weaver-dlt-interoperability/docs/external/getting-started/interop/overview">Testing Interoperation Modes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/weaver-dlt-interoperability/docs/external/getting-started/enabling-weaver-network/overview">Enabling Weaver in your Network and Application</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/weaver-dlt-interoperability/docs/external/what-is-interoperability/understanding-interoperability">What is Interoperability?</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaver-dlt-interoperability/docs/external/interoperability-modes">Interoperability Modes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaver-dlt-interoperability/docs/external/design-principles">Design Principles</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/weaver-dlt-interoperability/docs/external/user-stories/overview">User Stories</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/weaver-dlt-interoperability/docs/external/architecture-and-design/overview">Architecture and Design</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/weaver-dlt-interoperability/docs/external/security-model/authentication">Security Model</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/weaver-dlt-interoperability/docs/external/deployment-considerations/deployment-patterns">Deployment Considerations</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaver-dlt-interoperability/docs/external/specifications">Specifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaver-dlt-interoperability/docs/external/roadmap">Roadmap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaver-dlt-interoperability/docs/external/publications">Publications</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/weaver-dlt-interoperability/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Getting Started</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Launching a Test Network</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Ledger Initialization</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Ledger Initialization</h1></header><p>Once the two Fabric networks and the Corda network are up and running along with their associated relays and drivers, we must initialize states in those networks to prepare them for interoperation. For the Fabric networks, this involves recording state in the channel ledgers, and for the Corda network, in the nodes&#x27; vaults. The configuration and bootstrapping takes different form depending on what <a href="/weaver-dlt-interoperability/docs/external/interoperability-modes">interoperability mode</a> you wish to test.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="preparation-for-data-sharing">Preparation for Data Sharing<a class="hash-link" href="#preparation-for-data-sharing" title="Direct link to heading">​</a></h2><p>Follow the below instructions to prepare your networks for data sharing tests.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="initializing-the-fabric-networks">Initializing the Fabric Networks<a class="hash-link" href="#initializing-the-fabric-networks" title="Direct link to heading">​</a></h3><p>We use the Fabric CLI (<code>fabric-cli</code>) built earlier (in <code>samples/fabric/fabric-cli</code> for the Node.js version and <code>samples/fabric/go-cli</code> for the Golang version) for this purpose.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-fabric-cli">Configuring the Fabric CLI<a class="hash-link" href="#configuring-the-fabric-cli" title="Direct link to heading">​</a></h4><p>During bootstrap, the ledgers in both <code>network1</code> and <code>network2</code> must be populated with the following information scoped by the interoperation chaincode:</p><ul><li>Access control policies governing requests from foreign networks</li><li>Security group info for foreign networks (i.e., identities of network units and their membership providers&#x27; certificate chains)</li><li>Verification policies for proofs supplied by foreign networks
Knowledge of foreign networks that must be configured in this stage is as follows:</li><li><code>network1</code> has policies and security group info for <code>network2</code> and <code>Corda_Network</code></li><li><code>network2</code> has policies and security group info for <code>network1</code> and <code>Corda_Network</code>
(<em><code>Corda_Network</code> will be launched later.</em>)
The ledgers must also be populated with sample key-value pairs for testing interoperation flows, scoped by the sample application chaincode.</li></ul><p>Prepare <code>fabric-cli</code> for configuration suitably as follows.</p><ul><li>Navigate to the <code>samples/fabric/fabric-cli</code> (for the Node.js version) or the <code>samples/fabric/go-cli</code> (for the Golang version) folder.</li><li>Create a <code>config.json</code> file by copying the <code>config.template.json</code> and setting (or adding or removing) suitable values:<ul><li>For each network, the relay port and connection profile paths are specified using the keys <code>relayPort</code> and <code>connProfilePath</code> respectively.<ul><li>Replace <code>&lt;PATH-TO-WEAVER&gt;</code> with the absolute path location of the <code>weaver-dlt-interoperability</code> clone folder.</li><li>Otherwise, leave the default values unchanged.</li></ul></li></ul></li><li>Create a <code>chaincode.json</code> file by copying the <code>chaincode.json.template</code> and leaving the default values unchanged. This file specified the arguments of the transaction to be locally invoked after fetching a remote view.</li><li>Create a <code>.env</code> file by copying <code>.env.template</code> and setting the following parameter values:<ul><li>If Relays and Drivers are deployed in the host machine:<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MEMBER_CREDENTIAL_FOLDER=&lt;PATH-TO-WEAVER&gt;/samples/fabric/fabric-cli/src/data/credentials</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DEFAULT_APPLICATION_CHAINCODE=&lt;chaincode-name&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DEFAULT_APPLICATION_FUNC=&lt;function-name&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CONFIG_PATH=./config.json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CHAINCODE_PATH=./chaincode.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>If Relays and Drivers are deployed in the Docker containers:<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MEMBER_CREDENTIAL_FOLDER=&lt;PATH-TO-WEAVER&gt;/samples/fabric/fabric-cli/src/data/credentials_docker</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DEFAULT_APPLICATION_CHAINCODE=&lt;chaincode-name&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DEFAULT_APPLICATION_FUNC=&lt;function-name&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CONFIG_PATH=./config.json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CHAINCODE_PATH=./chaincode.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>In each case, replace <code>&lt;PATH-TO-WEAVER&gt;</code> with the absolute path location of your clone of Weaver and <code>&lt;chaincode-name&gt;</code> with the name of the deployed chaincode, either <code>simplestate</code> or <code>simplestatewithacl</code>.</li><li>If <code>simplestate</code> is deployed, set <code>&lt;function-name&gt;</code> to <code>Create</code>, and if <code>simplestatewithacl</code> if deployed, set <code>&lt;function-name&gt;</code> to <code>CreateFromRemote</code>.</li><li>Leave the default values unchanged for the other parameters.</li></ul></li><li>Run the following command:<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli </span><span class="token function" style="color:rgb(130, 170, 255)">env</span><span class="token plain"> set-file ./.env</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><table><thead><tr><th align="left">Notes</th></tr></thead><tbody><tr><td align="left">If the <code>CONFIG_PATH</code> environment variable is omitted from <code>.env</code>, then you must also run:<br><code>./bin/fabric-cli config set-file ./config.json</code></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bootstrapping-network-and-application-state">Bootstrapping Network and Application State<a class="hash-link" href="#bootstrapping-network-and-application-state" title="Direct link to heading">​</a></h4><p>Finally, to prepare both <code>network1</code> and <code>network2</code> for interoperation, run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli configure all network1 network2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If Fabric networks were launched with 2 organizations, run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli configure all network1 network2 --num-orgs</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Instead, if you launched only one of the two Fabric networks, run the following after replacing <code>&lt;network-id&gt;</code> with either <code>network1</code> or <code>network2</code>, and <code>&lt;1/2&gt;</code> with number of organizations in the network:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli configure all </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">network-id</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> --num-orgs</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">/</span><span class="token operator file-descriptor important" style="color:rgb(137, 221, 255)">2</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Wait for at least 5 minutes before moving on to the next step (testing interoperability modes) to allow the networks&#x27; IIN Agents to sync their respective memberships (which occur after every 5 minutes by default).</strong></p><p><strong>Optionally</strong>, fabric-cli can be used to trigger sync manually by running following command: </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli configure membership --local-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network1 --target-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network2 --iin-agent-endpoint</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">localhost:9500</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This command syncs <code>network2</code>&#x27;s membership (target-network) in <code>network1</code> (local-network) using IIN Agent of <code>Org1MSP</code> as initiator. Similarly <code>network1</code>&#x27;s membership can be synced to <code>network2</code>&#x27;s ledger by running:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli configure membership --local-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network2 --target-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network1 --iin-agent-endpoint</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">localhost:9501</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Wait for 20-30 seconds after above commands to allow IIN Agents to finish the sync.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="initializing-the-corda-networks">Initializing the Corda Networks<a class="hash-link" href="#initializing-the-corda-networks" title="Direct link to heading">​</a></h3><p>Once the Corda networks are launched, the client applications (built earlier) needs to be exercised to generate network (ledger) state in preparation to test interoperation flows.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bootstrapping-networks-and-application-states">Bootstrapping Networks and Application States<a class="hash-link" href="#bootstrapping-networks-and-application-states" title="Direct link to heading">​</a></h4><p>Just as we did for either Fabric network, the Corda network ledger (or <em>vault</em> on each node) must be initialized with access control policies, verification policies, and security group information for the two Fabric networks. Further, sample key-value pairs need to be recorded so we can later share them with a Fabric network via an interoperation flow.</p><p>Bootstrap the Corda networks and application states as follows (<em>the following instructions will initialize either or both Corda networks, depending on which of those are up and running</em>):</p><ul><li>Navigate to the <code>samples/corda/corda-simple-application</code> folder.</li><li>Run the following: <ul><li>If Relays and Drivers are deployed in the host machine:<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> initialise-vault</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>If Relays and Drivers are deployed in the Docker containers:<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> initialise-vault-docker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>Even upon successful execution (as indicated by the console output), you may see errors of the following form:</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[ERROR] 07:51:17.206 [epollEventLoopGroup-19-1] client.exceptionCaught - AMQ214015: Failed to execute connection life cycle listener</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">java.util.concurrent.RejectedExecutionException: Task org.apache.activemq.artemis.utils.actors.ProcessorBase$$Lambda$34/681158875@666df796 rejected from java.util.concurrent.ThreadPoolExecutor@236f653f[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 6]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2063) ~[?:1.8.0_402]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">..........</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>You can ignore these as they are transient errors that don&#x27;t impact the operations.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps">Next Steps<a class="hash-link" href="#next-steps" title="Direct link to heading">​</a></h3><p>The test networks are now configured and their ledgers are initialized. You can now run the <a href="/weaver-dlt-interoperability/docs/external/getting-started/interop/data-sharing">data sharing flows</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="preparation-for-asset-exchange">Preparation for Asset Exchange<a class="hash-link" href="#preparation-for-asset-exchange" title="Direct link to heading">​</a></h2><p>Follow the below instructions to prepare your networks for asset exchange tests.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="initializing-the-fabric-networks-1">Initializing the Fabric Networks<a class="hash-link" href="#initializing-the-fabric-networks-1" title="Direct link to heading">​</a></h3><p>We use the Fabric CLI (<code>fabric-cli</code>) built earlier (in <code>samples/fabric/fabric-cli</code> for the Node.js version and <code>samples/fabric/go-cli</code> for the Golang version) for this purpose.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-fabric-cli-1">Configuring the Fabric CLI<a class="hash-link" href="#configuring-the-fabric-cli-1" title="Direct link to heading">​</a></h4><p>The ledgers must be populated with sample key-value pairs for testing interoperation flows, scoped by the sample application chaincode.</p><p>Prepare <code>fabric-cli</code> for configuration suitably as follows.</p><ul><li>Navigate to the <code>samples/fabric/fabric-cli</code> (for the Node.js version) or the <code>samples/fabric/go-cli</code> (for the Golang version) folder.</li><li>Create a <code>config.json</code> file by copying the <code>config.template.json</code> and setting (or adding or removing) suitable values:<ul><li>For each network, the relay port and connection profile paths are specified using the keys <code>relayPort</code> and <code>connProfilePath</code> respectively.<ul><li>Replace <code>&lt;PATH-TO-WEAVER&gt;</code> with the absolute path location of the <code>weaver-dlt-interoperability</code> clone folder.</li><li>Set the <code>chaincode</code> attribute in each network to the deployed chaincode name (<code>simpleasset</code> or <code>simpleassetandinterop</code> or <code>simpleassettransfer</code>).</li><li>Otherwise, leave the default values unchanged.</li></ul></li></ul></li><li>Create a <code>.env</code> file by copying <code>.env.template</code> and setting following parameter values:<ul><li>If Relays and Drivers are deployed in the host machine:<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MEMBER_CREDENTIAL_FOLDER=&lt;PATH-TO-WEAVER&gt;/samples/fabric/fabric-cli/src/data/credentials</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CONFIG_PATH=./config.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>If Relays and Drivers are deployed in the Docker containers:<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MEMBER_CREDENTIAL_FOLDER=&lt;PATH-TO-WEAVER&gt;/samples/fabric/fabric-cli/src/data/credentials_docker</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CONFIG_PATH=./config.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>In each case, replace <code>&lt;PATH-TO-WEAVER&gt;</code> with the absolute path location of your clone of Weaver.</li><li>Leave the default values unchanged for the other parameters.</li></ul></li><li>Run the following command:<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli </span><span class="token function" style="color:rgb(130, 170, 255)">env</span><span class="token plain"> set-file ./.env</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><table><thead><tr><th align="left">Notes</th></tr></thead><tbody><tr><td align="left">If the <code>CONFIG_PATH</code> environment variable is omitted from <code>.env</code>, then you must also run:<br><code>./bin/fabric-cli config set-file ./config.json</code></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bootstrapping-network-and-application-state-1">Bootstrapping Network and Application State<a class="hash-link" href="#bootstrapping-network-and-application-state-1" title="Direct link to heading">​</a></h4><p>Finally, to prepare both <code>network1</code> and <code>network2</code> for interoperation, run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./scripts/initAsset.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="initializing-the-corda-networks-1">Initializing the Corda Networks<a class="hash-link" href="#initializing-the-corda-networks-1" title="Direct link to heading">​</a></h3><p>Corda Network needs to be initialized with assets for asset-exchange to be performed:
Bootstrap the Corda network and application states as follows:</p><ul><li>Navigate to the <code>samples/corda/corda-simple-application</code> folder.</li><li>Run the following: <ul><li>For <code>cordaSimpleApplication</code> app, run:<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./scripts/initAsset.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="initializing-the-besu-networks">Initializing the Besu Networks<a class="hash-link" href="#initializing-the-besu-networks" title="Direct link to heading">​</a></h3><p>Let&#x27;s assume that <code>network1</code> can either manage NFT <code>AliceERC721</code> or Hybrid <code>AliceERC1155</code> tokens, while <code>network2</code> manages fungible <code>BobERC20</code> tokens. Here we use account <code>1</code> for Alice and account <code>2</code> for Bob in both neworks. To prepare Besu networks for asset exchange, navigate to the <code>samples/besu/besu-cli</code> and then follow the steps in next subsections.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-besu-cli">Configuring the Besu-CLI<a class="hash-link" href="#configuring-the-besu-cli" title="Direct link to heading">​</a></h4><p>Create a <code>config.json</code> file by copying the <code>config.template.json</code>, keep the default values for managing <code>AliceERC721</code> tokens in <code>network1</code> and <code>BobERC20</code> tokens in <code>network2</code>.
If you want to change the token type used in the <code>network1</code> to Hybrid <code>AliceERC1155</code> tokens, in <code>config.json</code> update <code>tokenContract</code> field with value <code>&quot;../simpleasset/build/contracts/AliceERC1155.json&quot;.</code></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bootstrapping-network-and-application-state-2">Bootstrapping Network and Application State<a class="hash-link" href="#bootstrapping-network-and-application-state-2" title="Direct link to heading">​</a></h4><p>Finally, to prepare both <code>network1</code> and <code>network2</code> for interoperation, run:</p><ul><li>If you wish to test the default exchange (ERC-20 tokens for ERC-721 tokens), run::<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./scripts/initAsset.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>This will issue <code>100 BobERC20</code> tokens to each account in <code>network2</code> and <code>AliceERC721</code> token with id <code>0</code> to <code>Alice</code> and id <code>1</code> to <code>Bob</code> in <code>network1</code>.</li><li>Instead, if you wish to test Alice&#x27;s exchange of ERC-1155 tokens for Bob&#x27;s ERC-20 tokens, run:<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./scripts/initAsset.sh hybrid</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>This will issue <code>100 BobERC20</code> tokens to each account in <code>network2</code> and <code>100 AliceERC1155</code> tokens with id <code>0</code> to <code>Alice</code> and id <code>1</code> to <code>Bob</code> in <code>network1</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps-1">Next Steps<a class="hash-link" href="#next-steps-1" title="Direct link to heading">​</a></h3><p>The test networks are now configured and their ledgers are initialized. You can now run the <a href="/weaver-dlt-interoperability/docs/external/getting-started/interop/asset-exchange/overview">asset exchange flows</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="preparation-for-asset-transfer">Preparation for Asset Transfer<a class="hash-link" href="#preparation-for-asset-transfer" title="Direct link to heading">​</a></h2><p>Follow the below instructions to prepare your networks for asset transfer tests.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="initializing-the-fabric-networks-2">Initializing the Fabric Networks<a class="hash-link" href="#initializing-the-fabric-networks-2" title="Direct link to heading">​</a></h3><p>We use the Fabric CLI (<code>fabric-cli</code>) built earlier (in <code>samples/fabric/fabric-cli</code> for the Node.js version and <code>samples/fabric/go-cli</code> for the Golang version) for this purpose.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-fabric-cli-2">Configuring the Fabric CLI<a class="hash-link" href="#configuring-the-fabric-cli-2" title="Direct link to heading">​</a></h4><p>During bootstrap, the ledgers in both <code>network1</code> and <code>network2</code> must be populated with the following information scoped by the interoperation chaincode:</p><ul><li>Access control policies governing requests from foreign networks</li><li>Security group info for foreign networks (i.e., identities of network units and their membership providers&#x27; certificate chains)</li><li>Verification policies for proofs supplied by foreign networks
Knowledge of foreign networks that must be configured in this stage is as follows:</li><li><code>network1</code> has policies and security group info for <code>network2</code> and <code>Corda_Network</code></li><li><code>network2</code> has policies and security group info for <code>network1</code> and <code>Corda_Network</code>
(<em>The Corda sample application doesn&#x27;t support asset transfer yet, but there is no harm in including it above.</em>)
The ledgers must also be populated with sample key-value pairs for testing interoperation flows, scoped by the sample application chaincode.</li></ul><p>Prepare <code>fabric-cli</code> for configuration suitably as follows.</p><ul><li>Navigate to the <code>samples/fabric/fabric-cli</code> folder (<em>the Go CLI doesn&#x27;t support asset transfer yet</em>).</li><li>Create a <code>config.json</code> file by copying the <code>config.template.json</code> and setting (or adding or removing) suitable values:<ul><li>For each network, the relay port and connection profile paths are specified using the keys <code>relayPort</code> and <code>connProfilePath</code> respectively.<ul><li>Replace <code>&lt;PATH-TO-WEAVER&gt;</code> with the absolute path location of the <code>weaver-dlt-interoperability</code> clone folder.</li><li>Set the <code>chaincode</code> attribute in each network to <code>simpleassettransfer</code>.</li><li>Set the <code>aclPolicyPrincipalType</code> attribute in <code>network2</code> to <code>ca</code>.</li><li>Otherwise, leave the default values unchanged.</li></ul></li></ul></li><li>Create <code>remote-network-config.json</code> file by copying <code>remote-network-config.json.template</code>. Use default values if relays and drivers are deployed in the host machine; else if they are deployed in Docker, update as follows:<ul><li>Update value for <code>relayEndpoint</code> for <code>network1</code> as <code>relay-network1:9080</code>.</li><li>Update value for <code>relayEndpoint</code> for <code>network2</code> as <code>relay-network2:9083</code>.</li><li>Update value for <code>relayEndpoint</code> for <code>Corda_Network</code> as <code>relay-corda:9081</code>.</li><li>Update value for <code>relayEndpoint</code> for <code>Corda_Network2</code> as <code>relay-corda2:9082</code>.</li><li>Update value for <code>partyEndPoint</code> for <code>Corda_Network</code> as <code>corda_partya_1:10003</code>.</li><li>Update value for <code>partyEndPoint</code> for <code>Corda_Network2</code> as <code>corda_network2_partya_1:10003</code>.</li></ul></li><li>Create <code>chaincode.json</code> file by copying <code>chaincode.json.template</code>. Keep the default values unchanged.</li><li>Create a <code>.env</code> file by copying <code>.env.template</code> and setting the following parameter values:<ul><li>If Relays and Drivers are deployed in the host machine:<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MEMBER_CREDENTIAL_FOLDER=&lt;PATH-TO-WEAVER&gt;/samples/fabric/fabric-cli/src/data/credentials</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DEFAULT_APPLICATION_CHAINCODE=simpleassettransfer</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CONFIG_PATH=./config.json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">REMOTE_CONFIG_PATH=./remote-network-config.json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CHAINCODE_PATH=./chaincode.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>If Relays and Drivers are deployed in the Docker containers:<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MEMBER_CREDENTIAL_FOLDER=&lt;PATH-TO-WEAVER&gt;/samples/fabric/fabric-cli/src/data/credentials_docker</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DEFAULT_APPLICATION_CHAINCODE=simpleassettransfer</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CONFIG_PATH=./config.json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">REMOTE_CONFIG_PATH=./remote-network-config.json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CHAINCODE_PATH=./chaincode.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>In each case, replace <code>&lt;PATH-TO-WEAVER&gt;</code> with the absolute path location of your clone of Weaver.</li><li>Leave the default values unchanged for the other parameters.</li></ul></li><li>Run the following command:<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli env set-file ./.env</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><table><thead><tr><th align="left">Notes</th></tr></thead><tbody><tr><td align="left">If the <code>CONFIG_PATH</code> environment variable is omitted from <code>.env</code>, then you must also run:<br><code>./bin/fabric-cli config set-file ./config.json</code></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bootstrapping-network-and-application-state-3">Bootstrapping Network and Application State<a class="hash-link" href="#bootstrapping-network-and-application-state-3" title="Direct link to heading">​</a></h4><p>Create appropriate access control and verification policies for <code>network1</code> and <code>network2</code> by running:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli configure create all --local-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli configure create all --local-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Load access control and verification policies onto the ledgers of <code>network1</code> and <code>network2</code> by running (replace <code>&lt;1/2&gt;</code> with number of organizations in the network):</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli configure network --local-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network1 --num-orgs</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">/</span><span class="token operator file-descriptor important" style="color:rgb(137, 221, 255)">2</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli configure network --local-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network2 --num-orgs</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">/</span><span class="token operator file-descriptor important" style="color:rgb(137, 221, 255)">2</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Wait for at least 5 minutes before moving on to the next step (testing interoperability modes) to allow the networks&#x27; IIN Agents to sync their respective memberships (which occur after every 5 minutes by default).</strong></p><p><strong>Optionally</strong>, fabric-cli can be used to trigger sync manually by running following command: </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli configure membership --local-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network1 --target-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network2 --iin-agent-endpoint</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">localhost:9500</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This command syncs <code>network2</code>&#x27;s membership (target-network) in <code>network1</code> (local-network) using IIN Agent of <code>Org1MSP</code> as initiator. Similarly <code>network1</code>&#x27;s membership can be synced to <code>network2</code>&#x27;s ledger by running:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli configure membership --local-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network2 --target-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network1 --iin-agent-endpoint</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">localhost:9501</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Wait for 20-30 seconds after above commands to allow IIN Agents to finish the sync.</p><p>Initialize bond and token asset states and ownerships on the <code>network1</code> ledger by running the following (this step will also create a user <code>alice</code> in <code>network1</code> and a user <code>bob</code> in <code>network2</code>):</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./scripts/initAssetsForTransfer.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="initializing-the-corda-networks-2">Initializing the Corda Networks<a class="hash-link" href="#initializing-the-corda-networks-2" title="Direct link to heading">​</a></h3><p>Once the Corda networks (<code>Corda_Network</code> and <code>Corda_Network2</code>) are launched, the client applications (built earlier) needs to be exercised to generate ledger state in both exporting/source and importing/destination networks in preparation to test asset transfer interoperation flows.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bootstrapping-networks-and-application-states-1">Bootstrapping Networks and Application States<a class="hash-link" href="#bootstrapping-networks-and-application-states-1" title="Direct link to heading">​</a></h4><p>The Corda network ledger (or <em>vault</em> on each node) must be initialized with access control policies, verification policies, and security group information for the other networks (two Fabric networks and other Corda network).</p><p>Bootstrap the Corda networks and application states as follows (<em>the following instructions will initialize either or both Corda networks, depending on which of those are up and running</em>):</p><ul><li>Navigate to the <code>samples/corda/corda-simple-application</code> folder.</li><li>Run the following:<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain"> clients/src/main/resources/config/remote-network-config.json.template clients/src/main/resources/config/remote-network-config.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>Use default values in <code>remote-network-config.json</code> if relays and drivers are deployed in the host machine; else if they are deployed in Docker, update as follows:<ul><li>Update value for <code>relayEndpoint</code> for <code>network1</code> as <code>relay-network1:9080</code>.</li><li>Update value for <code>relayEndpoint</code> for <code>network2</code> as <code>relay-network2:9083</code>.</li><li>Update value for <code>relayEndpoint</code> for <code>Corda_Network</code> as <code>relay-corda:9081</code>.</li><li>Update value for <code>relayEndpoint</code> for <code>Corda_Network2</code> as <code>relay-corda2:9082</code>.</li><li>Update value for <code>partyEndPoint</code> for <code>Corda_Network</code> as <code>corda_partya_1:10003</code>.</li><li>Update value for <code>partyEndPoint</code> for <code>Corda_Network2</code> as <code>corda_network2_partya_1:10003</code>.</li></ul></li><li>Run the following: <ul><li>If Relays and Drivers are deployed in the host machine:<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> initialise-vault-asset-transfer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>If Relays and Drivers are deployed in the Docker containers:<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> initialise-vault-asset-transfer-docker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>Even upon successful execution (as indicated by the console output), you may see errors of the following form:</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[ERROR] 07:51:17.206 [epollEventLoopGroup-19-1] client.exceptionCaught - AMQ214015: Failed to execute connection life cycle listener</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">java.util.concurrent.RejectedExecutionException: Task org.apache.activemq.artemis.utils.actors.ProcessorBase$$Lambda$34/681158875@666df796 rejected from java.util.concurrent.ThreadPoolExecutor@236f653f[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 6]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2063) ~[?:1.8.0_402]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">..........</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>You can ignore these as they are transient errors that don&#x27;t impact the operations.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps-2">Next Steps<a class="hash-link" href="#next-steps-2" title="Direct link to heading">​</a></h3><p>The test networks are now configured and their ledgers are initialized. You can now run the <a href="/weaver-dlt-interoperability/docs/external/getting-started/interop/asset-transfer">asset transfer flows</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/hyperledger-labs/weaver-dlt-interoperability/edit/main/docs/external/getting-started/test-network/ledger-initialization.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/weaver-dlt-interoperability/docs/external/getting-started/test-network/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Component Overview</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/weaver-dlt-interoperability/docs/external/getting-started/interop/overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Testing Interoperation Modes</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#preparation-for-data-sharing" class="table-of-contents__link toc-highlight">Preparation for Data Sharing</a><ul><li><a href="#initializing-the-fabric-networks" class="table-of-contents__link toc-highlight">Initializing the Fabric Networks</a></li><li><a href="#initializing-the-corda-networks" class="table-of-contents__link toc-highlight">Initializing the Corda Networks</a></li><li><a href="#next-steps" class="table-of-contents__link toc-highlight">Next Steps</a></li></ul></li><li><a href="#preparation-for-asset-exchange" class="table-of-contents__link toc-highlight">Preparation for Asset Exchange</a><ul><li><a href="#initializing-the-fabric-networks-1" class="table-of-contents__link toc-highlight">Initializing the Fabric Networks</a></li><li><a href="#initializing-the-corda-networks-1" class="table-of-contents__link toc-highlight">Initializing the Corda Networks</a></li><li><a href="#initializing-the-besu-networks" class="table-of-contents__link toc-highlight">Initializing the Besu Networks</a></li><li><a href="#next-steps-1" class="table-of-contents__link toc-highlight">Next Steps</a></li></ul></li><li><a href="#preparation-for-asset-transfer" class="table-of-contents__link toc-highlight">Preparation for Asset Transfer</a><ul><li><a href="#initializing-the-fabric-networks-2" class="table-of-contents__link toc-highlight">Initializing the Fabric Networks</a></li><li><a href="#initializing-the-corda-networks-2" class="table-of-contents__link toc-highlight">Initializing the Corda Networks</a></li><li><a href="#next-steps-2" class="table-of-contents__link toc-highlight">Next Steps</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Weaver Framework.</div></div></div></footer></div>
<script src="/weaver-dlt-interoperability/assets/js/runtime~main.45c04fde.js"></script>
<script src="/weaver-dlt-interoperability/assets/js/main.4aa7da0c.js"></script>
</body>
</html>