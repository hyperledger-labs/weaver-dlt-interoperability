<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/weaver-dlt-interoperability/blog/rss.xml" title="Weaver: DLT Interoperability Framework Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/weaver-dlt-interoperability/blog/atom.xml" title="Weaver: DLT Interoperability Framework Blog Atom Feed"><title data-react-helmet="true">Getting Started | Weaver: DLT Interoperability Framework</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Getting Started | Weaver: DLT Interoperability Framework"><meta data-react-helmet="true" name="description" content="&lt;!--"><meta data-react-helmet="true" property="og:description" content="&lt;!--"><meta data-react-helmet="true" property="og:url" content="https://hyperledger-labs.github.io/weaver-dlt-interoperability/docs/external/getting-started"><link data-react-helmet="true" rel="shortcut icon" href="/weaver-dlt-interoperability/shared/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://hyperledger-labs.github.io/weaver-dlt-interoperability/docs/external/getting-started"><link rel="stylesheet" href="/weaver-dlt-interoperability/styles.886962d7.css">
<link rel="preload" href="/weaver-dlt-interoperability/styles.a15b8b30.js" as="script">
<link rel="preload" href="/weaver-dlt-interoperability/runtime~main.49587da7.js" as="script">
<link rel="preload" href="/weaver-dlt-interoperability/main.ac420d39.js" as="script">
<link rel="preload" href="/weaver-dlt-interoperability/1.5415942a.js" as="script">
<link rel="preload" href="/weaver-dlt-interoperability/2.cee88254.js" as="script">
<link rel="preload" href="/weaver-dlt-interoperability/51.1d965d2d.js" as="script">
<link rel="preload" href="/weaver-dlt-interoperability/52.c9772a4d.js" as="script">
<link rel="preload" href="/weaver-dlt-interoperability/935f2afb.3da01bdc.js" as="script">
<link rel="preload" href="/weaver-dlt-interoperability/17896441.b54c30e2.js" as="script">
<link rel="preload" href="/weaver-dlt-interoperability/ade408ff.1bd10959.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/weaver-dlt-interoperability/"><img src="/weaver-dlt-interoperability/shared/logo.svg" alt="Weaver" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/weaver-dlt-interoperability/shared/logo.svg" alt="Weaver" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Weaver</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/weaver-dlt-interoperability/docs/external/introduction">Docs</a><a class="navbar__item navbar__link" href="/weaver-dlt-interoperability/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hyperledger-labs/weaver-dlt-interoperability" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/weaver-dlt-interoperability/"><img src="/weaver-dlt-interoperability/shared/logo.svg" alt="Weaver" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/weaver-dlt-interoperability/shared/logo.svg" alt="Weaver" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Weaver</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/weaver-dlt-interoperability/docs/external/introduction">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/weaver-dlt-interoperability/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/hyperledger-labs/weaver-dlt-interoperability" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/weaver-dlt-interoperability/docs/external/introduction">Weaver Framework</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/weaver-dlt-interoperability/docs/external/getting-started">Getting Started</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">What is Interoperability?</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/weaver-dlt-interoperability/docs/external/what-is-interoperability/understanding-interoperability">Understanding Interoperability</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/weaver-dlt-interoperability/docs/external/what-is-interoperability/levels-of-interoperability">Levels of Interoperability</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/weaver-dlt-interoperability/docs/external/what-is-interoperability/integration-patterns">Integration Patterns</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/weaver-dlt-interoperability/docs/external/interoperability-modes">Interoperability Modes</a></li><li class="menu__list-item"><a class="menu__link" href="/weaver-dlt-interoperability/docs/external/design-principles">Design Principles</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">User Stories</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/weaver-dlt-interoperability/docs/external/user-stories/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/weaver-dlt-interoperability/docs/external/user-stories/global-trade">Global Trade</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/weaver-dlt-interoperability/docs/external/user-stories/financial-markets">DvP in Financial Markets</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/weaver-dlt-interoperability/docs/external/user-stories/legacy-integration">Legacy Integration</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Architecture and Design</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/weaver-dlt-interoperability/docs/external/architecture-and-design/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/weaver-dlt-interoperability/docs/external/architecture-and-design/relay">Relay</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/weaver-dlt-interoperability/docs/external/architecture-and-design/drivers">Drivers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/weaver-dlt-interoperability/docs/external/architecture-and-design/weaver-dapps">Weaver Dapps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/weaver-dlt-interoperability/docs/external/architecture-and-design/decentralized-identity">Decentralized Identity</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Security Model</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/weaver-dlt-interoperability/docs/external/security-model/authentication">Authentication</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/weaver-dlt-interoperability/docs/external/security-model/access-control">Access Control</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/weaver-dlt-interoperability/docs/external/security-model/proofs-and-verification">Proofs and Verification</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/weaver-dlt-interoperability/docs/external/security-model/end-to-end-security">End-to-End Security</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Deployment Considerations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/weaver-dlt-interoperability/docs/external/deployment-considerations/deployment-patterns">Deployment Patterns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/weaver-dlt-interoperability/docs/external/deployment-considerations/governance-and-policies">Governance and Policies</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/weaver-dlt-interoperability/docs/external/deployment-considerations/legal-and-regulation">Legal and Regulation</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/weaver-dlt-interoperability/docs/external/specifications">Specifications</a></li><li class="menu__list-item"><a class="menu__link" href="/weaver-dlt-interoperability/docs/external/roadmap">Roadmap</a></li><li class="menu__list-item"><a class="menu__link" href="/weaver-dlt-interoperability/docs/external/publications">Publications</a></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Getting Started</h1></header><div class="markdown"><p>This document details how to get the system running end-to-end locally.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="overview"></a>Overview<a class="hash-link" href="#overview" title="Direct link to heading">#</a></h1><p>A comprehensive demonstrations of basic interoperation flows for trusted data sharing among networks built on Corda and Hyperledger Fabric require 9 different components:</p><ul><li><a href="https://github.com/hyperledger-labs/weaver-dlt-interoperability/tree/master/tests/network-setups/fabric/dev" target="_blank" rel="noopener noreferrer">Fabric testnet</a> - A pair of basic Fabric networks for testing interop flows</li><li><a href="https://github.com/hyperledger-labs/weaver-dlt-interoperability/tree/master/tests/network-setups/corda" target="_blank" rel="noopener noreferrer">Corda testnet</a> - A basic Corda network for testing interop flows</li><li><a href="https://github.com/hyperledger-labs/weaver-dlt-interoperability/tree/master/core/relay" target="_blank" rel="noopener noreferrer">Relay</a> - The daemon and protocol for cross-DLT interoperability. Two instances of this project is needed, one for the Corda network and one for the Fabric network</li><li><a href="https://github.com/hyperledger-labs/weaver-dlt-interoperability/tree/master/core/drivers/fabric-driver" target="_blank" rel="noopener noreferrer">Fabric driver</a> - Driver used by the Fabric networks relay to communicate with the Fabric testnet</li><li><a href="https://github.com/hyperledger-labs/weaver-dlt-interoperability/tree/master/core/drivers/corda-driver" target="_blank" rel="noopener noreferrer">Corda driver</a> - Driver used by the Corda networks relay to communicate with the Corda testnet</li><li><a href="https://github.com/hyperledger-labs/weaver-dlt-interoperability/tree/master/core/network/corda-interop-app" target="_blank" rel="noopener noreferrer">Corda interop app</a> CorDapp used to handle interop duties between the relay and the application</li><li><a href="https://github.com/hyperledger-labs/weaver-dlt-interoperability/tree/master/samples/corda/corda-simple-application" target="_blank" rel="noopener noreferrer">Corda client app</a> - CorDapp and client used to trigger interop flows initiated from the Corda side and to manage Corda state</li><li><a href="https://github.com/hyperledger-labs/weaver-dlt-interoperability/tree/master/tests/samples/fabric/fabric-cli" target="_blank" rel="noopener noreferrer">Fabric client</a> - Fabric client used to trigger interop flows initiated from the Fabric side and to manage Fabric state</li><li><a href="https://github.com/hyperledger-labs/weaver-dlt-interoperability/tree/master/core/network/fabric-interop-cc" target="_blank" rel="noopener noreferrer">Fabric Interop chaincode</a> - The Fabric interoperability contracts handle the dual process of servicing requests for views from external networks, and verifing requested views for integrity</li></ul><p>In the <strong>Setup</strong> section below, we detail the steps using which you can bring up networks and share data among them using interoperation flows using the default configuration settings. To customize these settings (e.g., hostnames, ports), refer to the <strong>Configuration</strong> section at the end of this page.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="setup"></a>Setup<a class="hash-link" href="#setup" title="Direct link to heading">#</a></h1><p><em>Note</em>: The default configuration is for a development setup, therefore all components are run on <code>localhost</code>, many within Docker containers.</p><p>Follow the instructions below to build and run components followed by interoperation flows. These instructions have been tested on Ubuntu Linux (bash shell) and Mac OS. In general, they should work on any system and shell as long as the various dependenices have been installed and configured.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="prerequisites"></a>Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="software"></a>Software<a class="hash-link" href="#software" title="Direct link to heading">#</a></h3><p>Before starting, make sure you have the following software installed on your host machine:</p><ul><li>Curl: <em>install using package manager, like <code>apt</code> on Debian/Ubuntu Linux</em></li><li>Git: <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git" target="_blank" rel="noopener noreferrer">sample instructions</a></li><li>Docker: <a href="https://docs.docker.com/engine/install/" target="_blank" rel="noopener noreferrer">sample instructions</a> (Latest version)</li><li>Docker-Compose: <a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer">sample instructions</a> (Latest version)</li><li>Golang: <a href="https://golang.org/dl/" target="_blank" rel="noopener noreferrer">sample instructions</a> (Version 1.15 or above)</li><li>Java (JDK and JRE): <a href="https://openjdk.java.net/install/" target="_blank" rel="noopener noreferrer">sample instructions</a> (Version 8)</li><li>Node.js and NPM: <a href="https://nodejs.org/en/download/package-manager/" target="_blank" rel="noopener noreferrer">sample instructions</a> (Version 11 to Version 16 Supported)</li><li>Yarn: <a href="https://classic.yarnpkg.com/en/docs/install/" target="_blank" rel="noopener noreferrer">sample instructions</a></li><li>Rust: <a href="https://www.rust-lang.org/tools/install" target="_blank" rel="noopener noreferrer">sample instructions</a></li><li>Protoc (Protobuf compiler): <em>Golang should already be installed and configured.</em><ul><li>Default method: Run the following with <code>sudo</code> if necessary. This will install both the protobuf compiler and the Go code generator plugin.<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">apt-get install protobuf-compiler</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">go get -u google.golang.org/protobuf/cmd/protoc-gen-go</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li>If the above method installs an older version of <code>protoc</code> (check using <code>protoc --version</code>), say below 3.12.x, you should download pre-compiled binaries instead. (With an older version, you may see errors while attempting to launch and setup the Fabric networks).<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt-get remove protobuf-compiler</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl -LO https://github.com/protocolbuffers/protobuf/releases/download/v3.15.6/protoc-3.15.6-linux-x86_64.zip</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt-get install unzip</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">unzip protoc-3.15.6-linux-x86_64.zip -d &lt;some-folder-path&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">export PATH=&quot;$PATH:&lt;some-folder-path&gt;/bin&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">go get -u google.golang.org/protobuf/cmd/protoc-gen-go</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><em>Note</em>: The latest version at present is <code>3.15.6</code>, but you should check the above link to find the most current version before running the above steps.</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="credentials"></a>Credentials<a class="hash-link" href="#credentials" title="Direct link to heading">#</a></h3><p>Make sure you have an SSH or GPG key registered in <a href="https://github.com" target="_blank" rel="noopener noreferrer">https://github.com</a> to allow seamless cloning of repositories (at present, various setup scripts clone repositories using the <code>https://</code> prefix but this may change to <code>git@</code> in the future).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="getting-the-code-and-documentation"></a>Getting the Code and Documentation<a class="hash-link" href="#getting-the-code-and-documentation" title="Direct link to heading">#</a></h2><p>Clone the <a href="https://github.com/hyperledger-labs/weaver-dlt-interoperability" target="_blank" rel="noopener noreferrer">weaver-dlt-interoperability</a> repository. The code to get a basic test network up and running and test data-sharing interoperation flows lies in the subfolder <code>tests/network-setups</code>, which should be your starting point, though the setups will rely on other parts of the repository, as you will find out in the instructions given on this page.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="hyperledger-fabric-components"></a>Hyperledger Fabric Components<a class="hash-link" href="#hyperledger-fabric-components" title="Direct link to heading">#</a></h2><p>Using the sequence of instructions below, you can start two separate Fabric networks, each with a single channel and application contract (chaincode). You can also start an interoperation contract, a relay and a <em>driver</em> acting on behalf of each network. You can build a Fabric CLI tool with which you can initialize both networks&#x27; ledgers with access control policies, foreign networks&#x27; security groups (i.e., membership providers&#x27; certificate chains), and some sample key-value pairs that can be shared during subsequent interoperation flows.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="fabric-interoperation-node-sdk"></a>Fabric Interoperation Node SDK<a class="hash-link" href="#fabric-interoperation-node-sdk" title="Direct link to heading">#</a></h3><p>A library, as companion to the <code>hyperledger/fabric-sdk-node</code>, is defined in the <code>sdks/fabric/interoperation-node-sdk</code> folder. This contains functions for Fabric Gateway-based applications to exercise interoperation capabilities via relays and also a number of utility/helper functions. The Fabric-CLI tool, which we will use later, depends on this library.</p><p>To build the library, do the following:</p><ul><li>Navigate to the <code>sdks/fabric/interoperation-node-sdk</code> folder.</li><li>Run the following command:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> build-local</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="fabric-network"></a>Fabric Network<a class="hash-link" href="#fabric-network" title="Direct link to heading">#</a></h3><p>The code for this lies in the <code>tests/network-setups</code> folder.</p><p>This folder contains code to create and launch networks <code>network1</code> and <code>network2</code> of identical specifications:</p><ul><li>Network: 1 peer, 1 peer CA, 1 ordering service node, 1 ordering service CA</li><li>Single channel named <code>mychannel</code></li><li>Single contract named <code>simplestate</code> (deployed on <code>mychannel</code>) that supports simple transactions (<code>Create</code>, <code>Read</code>, <code>Update</code>, <code>Delete</code>) involving storage and lookup of &lt;key, value&gt; pairs.</li></ul><p>Follow the instructions below to build and launch the networks:</p><ul><li>Navigate to the <code>tests/network-setups/fabric/dev</code> folder.</li><li>To spin up both network1 and network2 with interoperation chaincode installed, run:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">make start-interop</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li>(<em>Note</em>: If you do not wish to test Fabric-Fabric interoperation, you can choose to install only one of the two networks along with its interoperation chaincode. For <code>network1</code>, run <code>make start-interop-network1</code>, and for <code>network2</code>, run <code>make start-interop-network2</code>.)</li></ul><p>For more information, refer to the associated <a href="https://github.com/hyperledger-labs/weaver-dlt-interoperability/tree/master/tests/network-setups/fabric/dev" target="_blank" rel="noopener noreferrer">README</a>.</p><p><strong>Troubleshooting Tips</strong>:</p><ul><li>If you see any errors during the launches, re-check the prerequisites (software installations and credentials). Ensure your network connection is working. As a safe bet, you can retry after cleanup: kill and remove all Docker containers and associated volumes.</li><li>If <code>protoc</code> or <code>protoc-gen-go</code> throws an error, reinstall <code>protoc</code> and <code>protoc-gen-go</code> using suggestions made in the Prerequisites section above.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="fabric-client-fabric-cli"></a>Fabric Client (fabric-cli)<a class="hash-link" href="#fabric-client-fabric-cli" title="Direct link to heading">#</a></h3><p>The CLI is used to interact with a Fabric network, configure it and run chaincode transactions to record data on the channel ledger or query data. It is also used to interact with remote networks through the relay in order to trigger an interoperation flow for data request and acceptance.</p><p>The <code>fabric-cli</code> source code is located in the <code>samples/fabric/fabric-cli</code> folder.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="prerequisites-1"></a>Prerequisites<a class="hash-link" href="#prerequisites-1" title="Direct link to heading">#</a></h4><p>If you are using a Linux system, make sure that lib64 is installed.</p><p><em>Note</em>: The setup and running instructions below were tested with all Node.js versions from v11.14.0 to v16.0.0.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="installation"></a>Installation<a class="hash-link" href="#installation" title="Direct link to heading">#</a></h4><p>You can install <code>fabric-cli</code> as follows:</p><ul><li>Navigate to the <code>samples/fabric/fabric-cli</code> folder.</li><li>Run the following to install dependencies:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li>Use the <code>fabric-cli</code> executable in the <code>bin</code> folder for subsequent actions. Either add that folder to your system path or simply run the command using <code>./bin/fabric-cli</code>.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="configuration"></a>Configuration<a class="hash-link" href="#configuration" title="Direct link to heading">#</a></h4><p>During bootstrap, the ledgers in both <code>network1</code> and <code>network2</code> must be populated with the following information scoped by the interoperation chaincode:</p><ul><li>Access control policies governing requests from foreign networks</li><li>Security group info for foreign networks (i.e., identities of network units and their membership providers&#x27; certificate chains)</li><li>Verification policies for proofs supplied by foreign networks
Knowledge of foreign networks that must be configured in this stage is as follows:</li><li><code>network1</code> has policies and security group info for <code>network2</code> and <code>Corda_Network</code></li><li><code>network2</code> has policies and security group info for <code>network1</code> and <code>Corda_Network</code>
(<em><code>Corda_Network</code> will be launched later.</em>)
The ledgers must also be populated with sample key-value pairs for testing interoperation flows, scoped by the sample application chaincode.</li></ul><p>Prepare <code>fabric-cli</code> for configuration as follows:</p><ul><li>Navigate to the <code>samples/fabric/fabric-cli</code> folder.</li><li>Create a <code>config.json</code> file by copying the <code>config.template.json</code> and setting (or adding or removing) suitable values:<ul><li>For each network, the relay port and connection profile paths are specified using the keys <code>relayPort</code> and <code>connProfilePath</code> respectively.<ul><li>Replace <code>&lt;PATH-TO-WEAVER&gt;</code> with the absolute path location of the <code>weaver-dlt-interoperability</code> clone folder.</li><li>Otherwise, leave the default values unchanged.</li></ul></li></ul></li><li>Create a <code>.env</code> file by copying <code>.env.template</code> and setting suitable parameter values:<ul><li>The <code>MEMBER_CREDENTIAL_FOLDER</code> should refer to the folder containing the credentials (security group and policy info) of all the foreign networks.<ul><li>If you specify a non-existent or new folder, <code>fabric-cli</code> will automatically generate sample credentials for you in that folder.</li><li>For this exercise, simply point to the folder <code>src/data/credentials</code> (<em>you must specify the full absolute path here</em>).</li></ul></li><li>The <code>CONFIG_PATH</code> must point to a JSON file that contains connection info for networks and relays.<ul><li>For this exercise, set the value to <code>./config.json</code>.</li></ul></li><li>Leave the default values unchanged for the other parameters.</li></ul></li><li>Run the following commands:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">fabric-cli env set-file ./.env</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li>If you haven&#x27;t specified CONFIG_PATH environment variable in .env, then run this:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">fabric-cli config set-file ./config.json</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><strong>NOTE:</strong> Only one thing is required, either specify CONFIG_PATH in .env file or run the above command, not both.</li></ul><p>See the <a href="#fabric-cli">Fabric CLI</a> section for more information.</p><p>Finally, to prepare both <code>network1</code> and <code>network2</code> for interoperation, run:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">fabric-cli configure all network1 network2</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="fabric-relay"></a>Fabric Relay<a class="hash-link" href="#fabric-relay" title="Direct link to heading">#</a></h3><p>The relay is a module acting on behalf of a network, enabling interoperation flows with other networks by communicating with their relays.
The code for this lies in the <code>core/relay</code> folder.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="building"></a>Building<a class="hash-link" href="#building" title="Direct link to heading">#</a></h4><p><em>Prerequisite</em>: make sure Rust is already installed and that the <code>cargo</code> executable is in your system path (after installation of Rust, this should be available in <code>$HOME/.cargo/bin</code>); you can also ensure this by running <code>source &quot;$HOME/.cargo/env&quot;</code>.</p><p>Build the generic (i.e., common to all DLTs) relay module as follows:</p><ul><li>Navigate to the <code>core/relay</code> folder.</li><li>Run the following:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">make</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="running"></a>Running<a class="hash-link" href="#running" title="Direct link to heading">#</a></h4><p>An instance or a relay can be run using a suitable configuration file. Samples are available in the <code>core/relay/config</code> folder.</p><p>Run a relay for <code>network1</code> as follows:</p><ul><li>Navigate to the <code>core/relay</code> folder.</li><li>Run the following:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">RELAY_CONFIG</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">config/Fabric_Relay.toml cargo run --bin server</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul><p>Run a relay for <code>network2</code> as follows (<em>do this only if you wish to test interoperation between the two Fabric networks <code>network1</code> and <code>network2</code></em>)</p><ul><li>Navigate to the <code>core/relay</code> folder.</li><li>Run the following:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">RELAY_CONFIG</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">config/Fabric_Relay2.toml cargo run --bin server</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul><p>For more information, see the <a href="https://github.com/hyperledger-labs/weaver-dlt-interoperability/tree/master/core/relay" target="_blank" rel="noopener noreferrer">relay README</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="fabric-driver"></a>Fabric Driver<a class="hash-link" href="#fabric-driver" title="Direct link to heading">#</a></h3><p>A driver is a DLT-specific plugin invoked by the relay while channelling external data queries to the local peer network and collecting a response with proofs. The Fabric driver is built as a Fabric client application on the <code>fabric-network</code> NPM package.
The code for this lies in the <code>core/drivers/fabric-driver</code> folder.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="configuring"></a>Configuring<a class="hash-link" href="#configuring" title="Direct link to heading">#</a></h4><p>In the <code>core/drivers/fabric-driver</code> folder, copy <code>.env.template</code> to <code>.env</code> and update <code>CONNECTION_PROFILE</code> to point to the connection profile of the fabric network (e.g. <code>&lt;PATH-TO-WEAVER&gt;/tests/network-setups/fabric/shared/network1/peerOrganizations/org1.network1.com/connection-org1.json</code>)</p><p>Configure <code>fabric-driver</code> for <code>network1</code> as follows:</p><ul><li>Navigate to the <code>core/drivers/fabric-driver</code> folder.</li><li>Create a <code>.env</code> file by copying <code>.env.template</code> and setting suitable parameter values:<ul><li>The <code>CONNECTION_PROFILE</code> should point to the absolute path of the connection profile for <code>network1</code>.<ul><li>For this exercise, specify the path <code>&lt;PATH-TO-WEAVER&gt;/tests/network-setups/fabric/shared/network1/peerOrganizations/org1.network1.com/connection-org1.json</code> (<em>you must specify the full absolute path here</em>).</li><li><code>&lt;PATH-TO-WEAVER&gt;</code> here is the absolute path of the <code>weaver-dlt-interoperability</code> clone folder.</li></ul></li><li>Leave the default values unchanged for the other parameters. The relay and driver endpoints as well as the network name are already specified.</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="building-1"></a>Building<a class="hash-link" href="#building-1" title="Direct link to heading">#</a></h4><p>Build the Fabric driver module as follows:</p><ul><li>Navigate to the <code>core/drivers/fabric-driver</code> folder.</li><li>Run the following:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> build-local</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> run postinstall</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><em>Note</em>: <code>postinstall</code> applies a customization patch to the <code>fabric-network</code> NPM library.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="running-1"></a>Running<a class="hash-link" href="#running-1" title="Direct link to heading">#</a></h4><p>Run a Fabric driver for <code>network1</code> as follows:</p><ul><li>Navigate to the <code>core/drivers/fabric-driver</code> folder.</li><li>Run the following:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> run dev</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul><p>Run a Fabric driver for <code>network2</code> as follows (<em>do this only if you wish to test interoperation between the two Fabric networks <code>network1</code> and <code>network2</code></em>)</p><ul><li>Navigate to the <code>core/drivers/fabric-driver</code> folder.</li><li>Run the following:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">CONNECTION_PROFILE</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token environment constant" style="color:rgb(130, 170, 255)">PATH</span><span class="token plain">-TO-WEAVER</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">/tests/network-setups/fabric/shared/network2/peerOrganizations/org1.network2.com/connection-org1.json </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">NETWORK_NAME</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network2 </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">RELAY_ENDPOINT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">localhost:9083 </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">DRIVER_ENDPOINT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">localhost:9095 </span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> run dev</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><em>Note</em>: the variables we specified earlier in the <code>.env</code> are now passed in the command line. Alternatively, you can make a copy of the <code>fabric-driver</code> folder with a different  name and create a separate <code>.env</code> file within it that contains links to the connection profile, relay, and driver for <code>network2</code>.</li></ul><p>For more information see the <a href="https://github.com/hyperledger-labs/weaver-dlt-interoperability/tree/master/core/drivers/fabric-driver" target="_blank" rel="noopener noreferrer">fabric-driver README</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="corda-components"></a>Corda Components<a class="hash-link" href="#corda-components" title="Direct link to heading">#</a></h2><p>Using the sequence of instructions below, you can start a Corda network and run an application Cordapp on it. You can also run an interoperation Cordapp, a relay and a <em>driver</em> acting on behalf of the network. You can initialize the network&#x27;s vault with access control policies, foreign networks&#x27; security groups (i.e., membership providers&#x27; certificate chains), and some sample state values that can be shared during subsequent interoperation flows.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="interoperation-cordapp"></a>Interoperation Cordapp<a class="hash-link" href="#interoperation-cordapp" title="Direct link to heading">#</a></h3><p>The interoperation Cordapp is deployed to run as part of any Corda application flow that involves cross-network interoperation.</p><p>Build the interoperation Cordapp as follows:</p><ul><li>Navigate to the <code>core/network/corda-interop-app</code> folder.</li><li>Run the following to create the JAR files on which other Corda network components will depend on:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> build-local</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="corda-client-application"></a>Corda Client (Application)<a class="hash-link" href="#corda-client-application" title="Direct link to heading">#</a></h3><p>This is a simple Cordapp that maintains a state of type <code>SimpleState</code>, which is a set of key-value pairs (of strings).
The code for this lies in the <code>samples/corda/corda-simple-application</code> folder.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="building-2"></a>Building<a class="hash-link" href="#building-2" title="Direct link to heading">#</a></h4><p>Build the <code>corda-simple-application</code> Cordapp as follows:</p><ul><li>Navigate to the <code>samples/corda/corda-simple-application</code> folder.</li><li>Run the following:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> build-local</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="corda-network"></a>Corda Network<a class="hash-link" href="#corda-network" title="Direct link to heading">#</a></h3><p>The Corda network code lies in the <code>tests/network-setups/corda</code> folder. You can launch a network consisting of one node (<code>PartyA</code>) and one notary.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="running-2"></a>Running<a class="hash-link" href="#running-2" title="Direct link to heading">#</a></h4><p>Follow the instructions below to build and launch the network:</p><ul><li>Navigate to the <code>tests/network-setups/corda</code> folder.</li><li>To spin up the Corda network with the interoperation Cordapp, run:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> start-local</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul><p>If the Corda node and notary start up successfully, you should something like the following:</p><p><img alt="Corda network startup screenshot" src="/weaver-dlt-interoperability/assets/images/Corda_network-b0e1d4960223c4783250302edcaca3d4.jpg"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="corda-relay"></a>Corda Relay<a class="hash-link" href="#corda-relay" title="Direct link to heading">#</a></h3><p>The relay was built earlier, so you just need to use a different configuration file to start a relay for the Corda network.</p><p>Run a relay as follows:</p><ul><li>Navigate to the <code>core/relay</code> folder.</li><li>(Make sure you&#x27;ve already built the relay by running <code>make</code>.)</li><li>Run the following:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">RELAY_CONFIG</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">config/Corda_Relay.toml cargo run --bin server</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul><p>If the relay starts up successfully, the following will be logged on your terminal:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Relay Name: &quot;Corda_Relay&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">RelayServer listening on [::1]:9081</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="corda-driver"></a>Corda Driver<a class="hash-link" href="#corda-driver" title="Direct link to heading">#</a></h3><p>The code for this lies in the <code>core/drivers/corda-driver</code> folder.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="building-3"></a>Building<a class="hash-link" href="#building-3" title="Direct link to heading">#</a></h4><p>Build the Corda driver module as follows:</p><ul><li>Navigate to the <code>core/drivers/corda-driver</code> folder.</li><li>Run the following:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> build-local</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="running-3"></a>Running<a class="hash-link" href="#running-3" title="Direct link to heading">#</a></h4><p>Run a Corda driver as follows:</p><ul><li>Navigate to the <code>core/drivers/corda-driver</code> folder.</li><li>Run the following:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./build/install/corda-driver/bin/corda-driver</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul><p>If the driver starts successfully, it should log the following message on your terminal:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Corda driver gRPC server started. Listening on port 9099</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="corda-client-application-1"></a>Corda Client (Application)<a class="hash-link" href="#corda-client-application-1" title="Direct link to heading">#</a></h3><p>Now that the network is launched, the client application (which we built earlier) needs to be exercised to generate network (ledger) state in preparation to test interoperation flows.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="bootstrapping-network-and-application-state"></a>Bootstrapping Network and Application State<a class="hash-link" href="#bootstrapping-network-and-application-state" title="Direct link to heading">#</a></h4><p>Just as we did for either Fabric network, the Corda network ledger (or <em>vault</em> on each node) must be initialized with access control policies, verification policies, and security group information for the two Fabric networks. Further, sample key-value pairs need to be recorded so we can later share them with a Fabric network via an interoperation flow.</p><p>Bootstrap the Corda network and application states as follows:</p><ul><li>Navigate to the <code>samples/corda/corda-simple-application</code> folder.</li><li>Run the following:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> initialise-vault</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="testing-interoperation-scenarios"></a>Testing Interoperation Scenarios<a class="hash-link" href="#testing-interoperation-scenarios" title="Direct link to heading">#</a></h1><p>Once the whole system is running, these flows can be executed to test the various interoperation flows i.e. Fabric to Corda, Corda to Fabric and Fabric to Fabric.
Once you have the networks, the relays, and the drivers, running, and the ledgers bootstrapped, you can test three different data-sharing combinations by triggering interoperation flows:</p><ol><li><strong>Corda to Fabric</strong>: The Corda network requests state and proof from either Fabric network</li><li><strong>Fabric to Corda</strong>: Either Fabric network requests state and proof from the Corda network</li><li><strong>Fabric to Fabric</strong>: One Fabric network requests state and proof from another Fabric network</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="corda-to-fabric"></a>Corda to Fabric<a class="hash-link" href="#corda-to-fabric" title="Direct link to heading">#</a></h2><p>To test the scenario where <code>Corda_Network</code> requests the value of the state (key) <code>a</code> from <code>network1</code>, do the following:</p><ul><li>Navigate to the <code>samples/corda/corda-simple-application</code> folder.</li><li>Run the following:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./clients/build/install/clients/bin/clients request-state localhost:9081 localhost:9080/network1/mychannel:simplestate:Read:a</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li>Query the value of the requested state (key) <code>a</code> in <code>Corda_Network</code> using the following (replace LinearId with the CorDapp simplestate linearId value obtained in the previous command):<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./clients/build/install/clients/bin/clients get-state-using-linear-id LinearId</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul><p>To test the scenario where <code>Corda_Network</code> requests the value of the state (key) <code>Arcturus</code> from <code>network2</code>, do the following:</p><ul><li>Navigate to the <code>samples/corda/corda-simple-application</code> folder.</li><li>Run the following:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./clients/build/install/clients/bin/clients request-state localhost:9081 localhost:9083/network2/mychannel:simplestate:Read:Arcturus</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="fabric-to-corda"></a>Fabric to Corda<a class="hash-link" href="#fabric-to-corda" title="Direct link to heading">#</a></h2><p>To test the scenario where <code>network1</code> requests the value of the state (key) <code>H</code> from <code>Corda_Network</code>, do the following:</p><ul><li>Navigate to the <code>samples/fabric/fabric-cli</code> folder.</li><li>(Make sure you have configured <code>fabric-cli</code> as per earlier instructions)</li><li>Run the following (if <code>fabric-cli</code> is not in your system path, specify the full path to the <code>fabric-cli</code> executable):<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">fabric-cli interop --local-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network1 --sign</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">true --requesting-org</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">Org1MSP localhost:9081/Corda_Network/localhost:10006</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#com.cordaSimpleApplication.flow.GetStateByKey:H --debug=true</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li>Query the value of the requested state (key) <code>H</code> in <code>network1</code> using the following (replace the Args with the Args value obtained in the previous command):<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">fabric-cli interop --local-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network1 chaincode invoke mychannel simplestate </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">read</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;[&quot;Args&quot;]&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul><p>To test the scenario where <code>network2</code> requests the value of the state (key) <code>H</code> from <code>Corda_Network</code>, do the following:</p><ul><li>Navigate to the <code>samples/fabric/fabric-cli</code> folder.</li><li>(Make sure you have configured <code>fabric-cli</code> as per earlier instructions)</li><li>Run the following (if <code>fabric-cli</code> is not in your system path, specify the full path to the <code>fabric-cli</code> executable):<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">fabric-cli interop --local-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network2 --sign</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">true --requesting-org</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">Org1MSP localhost:9081/Corda_Network/localhost:10006</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#com.cordaSimpleApplication.flow.GetStateByKey:H --debug=true</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="fabric-to-fabric"></a>Fabric to Fabric<a class="hash-link" href="#fabric-to-fabric" title="Direct link to heading">#</a></h2><p>To test the scenario where <code>network1</code> requests the value of the state (key) <code>Arcturus</code> from <code>network2</code>, do the following:</p><ul><li>Navigate to the <code>samples/fabric/fabric-cli</code> folder.</li><li>(Make sure you have configured <code>fabric-cli</code> as per earlier instructions)</li><li>Run the following (if <code>fabric-cli</code> is not in your system path, specify the full path to the <code>fabric-cli</code> executable):<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">fabric-cli interop --local-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network1 --requesting-org</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">Org1MSP localhost:9083/network2/mychannel:simplestate:Read:Arcturus</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li>Query the value of the requested state (key) <code>Arcturus</code> in <code>network1</code> using the following (replace the Args with the Args value obtained in the previous command):<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">fabric-cli interop --local-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network1 chaincode invoke mychannel simplestate </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">read</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;[&quot;Args&quot;]&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul><p>To test the scenario where <code>network2</code> requests the value of the state (key) <code>a</code> from <code>network1</code>, do the following:</p><ul><li>Navigate to the <code>samples/fabric/fabric-cli</code> folder.</li><li>(Make sure you have configured <code>fabric-cli</code> as per earlier instructions)</li><li>Run the following (if <code>fabric-cli</code> is not in your system path, specify the full path to the <code>fabric-cli</code> executable):<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">fabric-cli interop --local-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network2 --requesting-org</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">Org1MSP localhost:9080/network1/mychannel:simplestate:Read:a</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="tear-down-the-setup"></a>Tear Down the Setup<a class="hash-link" href="#tear-down-the-setup" title="Direct link to heading">#</a></h1><p>Bring down the various components as follows:</p><ul><li>Simply terminate the various relays and drivers, which are running in the foreground in different terminals</li><li>To bring down the Corda network:<ul><li>Navigate to the <code>tests/network-setups/corda</code> folder.</li><li>Run the following:</li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> clean</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li>To bring down one or both of the Fabric networks:<ul><li>Navigate to the <code>tests/network-setups/fabric/dev</code> folder.</li><li>Run the following:</li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> clean</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="configuration-1"></a>Configuration<a class="hash-link" href="#configuration-1" title="Direct link to heading">#</a></h1><p>If you don&#x27;t want to run all the system components on your local machine, or if you want to select different host names or ports, you can tweak the configurations appropriately. Here is a list, classified by the DLT type.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="corda"></a>Corda<a class="hash-link" href="#corda" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="relay"></a>Relay<a class="hash-link" href="#relay" title="Direct link to heading">#</a></h3><p>To run the relay on a different port from the default (<code>9081</code>), do the following:</p><ul><li>Navigate to the <code>core/relay</code> folder.</li><li>Update the <code>port</code> field in <code>config/Corda_Relay.toml</code>.</li><li>To ensure that the relay of <code>network1</code> can communicate with this relay, update the <code>port</code> field in the <code>relays.Corda_Relay</code> section in <code>config/Fabric_Relay.toml</code> with the same value.</li><li>To ensure that the relay of <code>network2</code> can communicate with this relay, update the <code>port</code> field in the <code>relays.Corda_Relay</code> section in <code>config/Fabric_Relay2.toml</code> with the same value.</li><li>(You can update host names in similar locations, by adjusting the <code>hostname</code> field.)</li><li>When you attempt a Fabric to Corda interoperation flow, use the new host name or port (instead of <code>localhost:9081</code>).</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="driver"></a>Driver<a class="hash-link" href="#driver" title="Direct link to heading">#</a></h3><p>To run the driver on a different port from the default (<code>9099</code>), do the following:</p><ul><li>Navigate to the <code>core/drivers/corda-driver</code> folder.</li><li>Set the environment variable <code>DRIVER_PORT</code> appropriately while running the executable as follows:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">DRIVER_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">port</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> ./build/install/corda-driver/bin/corda-driver</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul><p>To ensure that the relay can connect to this driver:</p><ul><li>Navigate to the <code>core/relay</code> folder.</li><li>Update the <code>port</code> field in the <code>drivers.Corda</code> section in <code>config/Corda_Relay.toml</code> with the same value.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="network"></a>Network<a class="hash-link" href="#network" title="Direct link to heading">#</a></h3><p><em>Note</em>: Currently, all the Corda nodes must be running on the same machine (<code>localhost</code> or some other) for seamless communication.</p><p>To change the ports the Corda nodes are listening on, do the following:</p><ul><li>Navigate to the <code>tests/network-setups/corda</code> folder.</li><li>Update the exposed ports in <code>docker-compose.yml</code> (defaults are <code>10003</code> for the <code>notary</code> container and <code>10006</code> for the <code>partya</code> container).</li><li>Navigate to the <code>samples/corda/corda-simple-application</code> folder.</li><li>Update the <code>CORDA_HOST</code> (default is <code>localhost</code>) and <code>CORDA_PORT</code> (default is <code>10006</code>) environment variables on your host machine to reflect the above update, or run the client bootstrapping script as follows:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">CORDA_HOST</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">hostname</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">CORDA_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">port</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> initialise-vault</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li>When you attempt a Fabric to Corda interoperation flow, use the new host name and port values as in the following example (<code>network1</code> requesting <code>Corda_Network</code>):<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">fabric-cli interop --local-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network1 --requesting-org</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">org1.network1.com localhost:9081/Corda_Network/</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">CORDA_HOST</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">:</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">CORDA_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#com.cordaSimpleApplication.flow.GetStateByKey:H`</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="client-application"></a>Client Application<a class="hash-link" href="#client-application" title="Direct link to heading">#</a></h3><p>The config files used to initialise the network&#x27;s verification policies, access control policies, and security group info, contain the address (host name and port) of the Corda node.
To update the address of the Corda node, do the following:</p><ul><li>Navigate to the <code>samples/corda/corda-simple-application</code> folder.</li><li>Edit the <code>rules --&gt; resource</code> field in line 7 in <code>clients/src/main/resources/config/FabricNetworkAccessControlPolicy.json</code> by replacing <code>localhost:10006</code> with <code>&lt;CORDA_HOST&gt;:&lt;CORDA_PORT&gt;</code> as specified in the previous section.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="fabric"></a>Fabric<a class="hash-link" href="#fabric" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="relay-1"></a>Relay<a class="hash-link" href="#relay-1" title="Direct link to heading">#</a></h3><p>To run the relay on a different port from the default (<code>9080</code> for <code>network1</code> and <code>9083</code> for <code>network2</code>), do the following:</p><ul><li>Navigate to the <code>core/relay</code> folder.</li><li>Update the <code>port</code> field in <code>config/Fabric_Relay.toml</code> (for <code>network1</code>) or <code>config/Fabric_Relay2.toml</code> (for <code>network2</code>).</li><li>To ensure Fabric-Fabric relay communication, update the foreign relay port in the <code>port</code> field in the <code>relays.Fabric_Relay</code> section in either of the above files.</li><li>To ensure that the Corda network&#x27;s relay can communicate with this relay, update the <code>port</code> field in the <code>relays.Fabric_Relay</code> section in <code>config/Corda_Relay.toml</code>.</li><li>(You can update host names in similar locations, by adjusting the <code>hostname</code> field.)</li><li>When you attempt a Fabric to Fabric or Corda to Fabric interoperation flow, use the new host name or port (instead of <code>localhost:9081</code> or <code>localhost:9083</code>).</li><li>Navigate to the <code>core/drivers/fabric-driver</code> folder.</li><li>Update the <code>RELAY_ENDPOINT</code> variable in <code>.env</code> or specify <code>RELAY_ENDPOINT=&lt;hostname&gt;:&lt;port&gt;</code> in the command line while running the driver using <code>npm run dev</code>.</li><li>Navigate to the <code>samples/fabric/fabric-cli</code> folder.</li><li>Update the <code>relayEndpoint</code> variables appropriately.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="driver-1"></a>Driver<a class="hash-link" href="#driver-1" title="Direct link to heading">#</a></h3><p>The <code>fabric-driver</code> configuration can be controlled by environment variables either set in <code>.env</code> in the <code>core/drivers/fabric-driver</code> folder (or a copy if you created one) or passed in the command line when you run <code>npm run dev</code> to start the driver. The relevant variables you can control when you make any change to the setup are:</p><ul><li><code>CONNECTION_PROFILE</code>: this is the path to the connection profile. If you make changes to the network or use a different one, create a new connection profile and point to it using this variable.</li><li><code>RELAY_ENDPOINT</code>: this is the endpoint of the relay (hostname and port), and you can adjust it as described in the previous section; this is where the relay will be listening for incoming requests and from where the relay will channel foreign requests as well.</li><li><code>DRIVER_ENDPOINT</code>: this is the hostname and port the driver itself will bind to, and you can change it from the default (<code>localhost:9090</code> for <code>network1</code> and <code>localhost:9095</code> for <code>network2</code>) as per your need</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="fabric-cli"></a>Fabric CLI<a class="hash-link" href="#fabric-cli" title="Direct link to heading">#</a></h3><p>You can adjust settings for <code>fabric-cli</code> in the <code>.env</code> and <code>config.json</code> (in the <code>samples/fabric/fabric-cli</code> folder) as described earlier.</p><p>Important environment variables (in <code>.env</code>) are:</p><ul><li><code>DEFAULT_CHANNEL</code>: this is the name of the channel the CLI will interact with. If you build a new channel or network, update the channel name here.</li><li><code>DEFAULT_CHAINCODE</code>: this is the name of the interoperaton chaincode the CLI will submit transactions and queries to for policy and security group bootstrapping. If you wish to test with a modified interoperation chaincode with a different name, update this value.</li><li><code>MEMBER_CREDENTIAL_FOLDER</code>: as described earlier, this is an absolute path that points to policies and security group info associated with foreign networks. You can adjust this info for the existing three networks or add credentials for another network you wish to test interoperation flows with.</li><li><code>LOCAL</code>: this is a boolean, indicating whether the network to connect to is running on (and as) <code>localhost</code></li><li><code>DEFAULT_APPLICATION_CHAINCODE</code>: this is the name of the application chaincode which maintains information that can be shared (with proof) with other networks upon request using interoperation. You may write and deploy your own chaincode and use its name here instead of the default <code>simplestate</code>.</li><li><code>CONFIG_PATH</code>: this points to the JSON file containing the configurations of all the Fabric networks that need to be configured using the <code>fabric-cli</code>.</li></ul><p>The <code>config.json</code> (which can have a different name as long as you add the right reference to <code>.env</code> and configure <code>fabric-cli</code> suitably) has the following structure (it can have any number of networks specified):</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;network1&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;connProfilePath&quot;: &quot;&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;relayEndpoint&quot;: &quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;network2&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;connProfilePath&quot;: &quot;&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;relayEndpoint&quot;: &quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ul><li><code>connProfilePath</code>: absolute path of the network&#x27;s connection profile</li><li><code>relayEndpoint</code>: hostname and port of the particular network&#x27;s relay (make sure you sync this with any changes made to that relay&#x27;s configuration)</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/hyperledger-labs/weaver-dlt-interoperability/edit/master/docs/external/getting-started.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/weaver-dlt-interoperability/docs/external/introduction"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Weaver Framework</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/weaver-dlt-interoperability/docs/external/what-is-interoperability/understanding-interoperability"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Understanding Interoperability Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link">Prerequisites</a><ul><li><a href="#software" class="table-of-contents__link">Software</a></li><li><a href="#credentials" class="table-of-contents__link">Credentials</a></li></ul></li><li><a href="#getting-the-code-and-documentation" class="table-of-contents__link">Getting the Code and Documentation</a></li><li><a href="#hyperledger-fabric-components" class="table-of-contents__link">Hyperledger Fabric Components</a><ul><li><a href="#fabric-interoperation-node-sdk" class="table-of-contents__link">Fabric Interoperation Node SDK</a></li><li><a href="#fabric-network" class="table-of-contents__link">Fabric Network</a></li><li><a href="#fabric-client-fabric-cli" class="table-of-contents__link">Fabric Client (fabric-cli)</a></li><li><a href="#fabric-relay" class="table-of-contents__link">Fabric Relay</a></li><li><a href="#fabric-driver" class="table-of-contents__link">Fabric Driver</a></li></ul></li><li><a href="#corda-components" class="table-of-contents__link">Corda Components</a><ul><li><a href="#interoperation-cordapp" class="table-of-contents__link">Interoperation Cordapp</a></li><li><a href="#corda-client-application" class="table-of-contents__link">Corda Client (Application)</a></li><li><a href="#corda-network" class="table-of-contents__link">Corda Network</a></li><li><a href="#corda-relay" class="table-of-contents__link">Corda Relay</a></li><li><a href="#corda-driver" class="table-of-contents__link">Corda Driver</a></li><li><a href="#corda-client-application-1" class="table-of-contents__link">Corda Client (Application)</a></li></ul></li><li><a href="#corda-to-fabric" class="table-of-contents__link">Corda to Fabric</a></li><li><a href="#fabric-to-corda" class="table-of-contents__link">Fabric to Corda</a></li><li><a href="#fabric-to-fabric" class="table-of-contents__link">Fabric to Fabric</a></li><li><a href="#corda" class="table-of-contents__link">Corda</a><ul><li><a href="#relay" class="table-of-contents__link">Relay</a></li><li><a href="#driver" class="table-of-contents__link">Driver</a></li><li><a href="#network" class="table-of-contents__link">Network</a></li><li><a href="#client-application" class="table-of-contents__link">Client Application</a></li></ul></li><li><a href="#fabric" class="table-of-contents__link">Fabric</a><ul><li><a href="#relay-1" class="table-of-contents__link">Relay</a></li><li><a href="#driver-1" class="table-of-contents__link">Driver</a></li><li><a href="#fabric-cli" class="table-of-contents__link">Fabric CLI</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Weaver Framework.</div></div></div></footer></div>
<script src="/weaver-dlt-interoperability/styles.a15b8b30.js"></script>
<script src="/weaver-dlt-interoperability/runtime~main.49587da7.js"></script>
<script src="/weaver-dlt-interoperability/main.ac420d39.js"></script>
<script src="/weaver-dlt-interoperability/1.5415942a.js"></script>
<script src="/weaver-dlt-interoperability/2.cee88254.js"></script>
<script src="/weaver-dlt-interoperability/51.1d965d2d.js"></script>
<script src="/weaver-dlt-interoperability/52.c9772a4d.js"></script>
<script src="/weaver-dlt-interoperability/935f2afb.3da01bdc.js"></script>
<script src="/weaver-dlt-interoperability/17896441.b54c30e2.js"></script>
<script src="/weaver-dlt-interoperability/ade408ff.1bd10959.js"></script>
</body>
</html>