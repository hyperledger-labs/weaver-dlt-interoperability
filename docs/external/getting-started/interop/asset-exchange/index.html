<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="alternate" type="application/rss+xml" href="/weaver-dlt-interoperability/blog/rss.xml" title="Weaver: DLT Interoperability Framework RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/weaver-dlt-interoperability/blog/atom.xml" title="Weaver: DLT Interoperability Framework Atom Feed"><title data-react-helmet="true">Asset Exchange | Weaver: DLT Interoperability Framework</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://hyperledger-labs.github.io/weaver-dlt-interoperability/docs/external/getting-started/interop/asset-exchange"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Asset Exchange | Weaver: DLT Interoperability Framework"><meta data-react-helmet="true" name="description" content="&lt;!--"><meta data-react-helmet="true" property="og:description" content="&lt;!--"><link data-react-helmet="true" rel="shortcut icon" href="/weaver-dlt-interoperability/shared/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://hyperledger-labs.github.io/weaver-dlt-interoperability/docs/external/getting-started/interop/asset-exchange"><link data-react-helmet="true" rel="alternate" href="https://hyperledger-labs.github.io/weaver-dlt-interoperability/docs/external/getting-started/interop/asset-exchange" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://hyperledger-labs.github.io/weaver-dlt-interoperability/docs/external/getting-started/interop/asset-exchange" hreflang="x-default"><link rel="stylesheet" href="/weaver-dlt-interoperability/assets/css/styles.fe84083a.css">
<link rel="preload" href="/weaver-dlt-interoperability/assets/js/runtime~main.19d8449f.js" as="script">
<link rel="preload" href="/weaver-dlt-interoperability/assets/js/main.43cbafb9.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/weaver-dlt-interoperability/"><div class="navbar__logo"><img src="/weaver-dlt-interoperability/shared/logo.svg" alt="Weaver" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/weaver-dlt-interoperability/shared/logo.svg" alt="Weaver" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Weaver</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/weaver-dlt-interoperability/docs/external/introduction">Docs</a><a class="navbar__item navbar__link" href="/weaver-dlt-interoperability/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hyperledger-labs/weaver-dlt-interoperability" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaver-dlt-interoperability/docs/external/introduction">Weaver Framework</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Getting Started</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/weaver-dlt-interoperability/docs/external/getting-started/guide">Using Weaver</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Launching a Test Network</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Testing Interoperation Modes</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/weaver-dlt-interoperability/docs/external/getting-started/interop/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/weaver-dlt-interoperability/docs/external/getting-started/interop/data-sharing">Data Sharing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/weaver-dlt-interoperability/docs/external/getting-started/interop/asset-exchange">Asset Exchange</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/weaver-dlt-interoperability/docs/external/getting-started/interop/asset-transfer">Asset Transfer</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Enabling Weaver in your Network and Application</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">What is Interoperability?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaver-dlt-interoperability/docs/external/interoperability-modes">Interoperability Modes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaver-dlt-interoperability/docs/external/design-principles">Design Principles</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">User Stories</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Architecture and Design</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Security Model</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Deployment Considerations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaver-dlt-interoperability/docs/external/specifications">Specifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaver-dlt-interoperability/docs/external/roadmap">Roadmap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/weaver-dlt-interoperability/docs/external/publications">Publications</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Asset Exchange</h1></header><p>This document lists sample ways in which you can exercise the asset-exchange interoperation protocol on the test network <a href="/weaver-dlt-interoperability/docs/external/getting-started/test-network/overview">launched earlier</a>.</p><p>For this scenario, you only need the networks to be running with the appropriate contracts deployed and the ledgers bootstrapped. You do not need to run relays and drivers. You can run the following combinations of exchanges (<em>other combinations of DLTs will be supported soon</em>).</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="fabric-with-fabric">Fabric with Fabric<a aria-hidden="true" class="hash-link" href="#fabric-with-fabric" title="Direct link to heading">â€‹</a></h2><p>One Fabric network transfers a bond from Alice to Bob in exchange for a transfer of tokens from Bob to Alice in the other network
Ensure that one of the following chaincodes have been deployed in both networks:</p><ul><li><code>simpleasset</code></li><li><code>simpleassetandinterop</code></li><li><code>simpleassettransfer</code></li></ul><p>Run the following steps:</p><table><thead><tr><th align="left">Notes</th></tr></thead><tbody><tr><td align="left">The hash used in following steps can be replaced by any valid <code>SHA256</code> hash.</td></tr></tbody></table><ol><li>Navigate to either the <code>samples/fabric/fabric-cli</code> folder or the <code>samples/fabric/go-cli</code> folder in your clone of the Weaver repository.</li><li>Run the following to verify the status of the assets owned by <code>alice</code> and <code>bob</code> in the two networks:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./scripts/getAssetStatus.sh </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>Complete the asset exchange in either of the two different ways:<ul><li>Using a single command:<ul><li>Run the following to trigger exchange of bond <code>bond01:a03</code> owned by <code>alice</code> in <code>network1</code> with <code>100</code> units of tokens <code>token1</code> owned by <code>bob</code> in <code>network2</code>:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli asset exchange-all --network1</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network1 --network2</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network2 --secret</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">secrettext --timeout-duration</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token plain"> alice:bond01:a03:bob:token1:100</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>To verify that <code>bob</code> now owns a bond in exchange for <code>alice</code> owning some tokens, run the following:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./scripts/getAssetStatus.sh </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul></li><li>Using step-by-step commands:<ul><li>Generate Secret-Hash Pair using following command (prints hash in base64):<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli hash --hash_fn=SHA256 secrettext</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>Run the following to trigger <code>alice</code> locking <code>bond01:a03</code> for <code>bob</code> in <code>network1</code><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli asset exchange lock --timeout-duration</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">3600</span><span class="token plain"> --locker</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">alice --recipient</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bob --hashBase64</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">ivHErp1x4bJDKuRo6L5bApO/DdoyD/dG0mAZrzLZEIs</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> --target-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network1 --param</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bond01:a03</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>Run the following to verify <code>alice</code>&#x27;s lock:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli asset exchange is-locked --locker</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">alice --recipient</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bob --target-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network1 --param</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bond01:a03</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>Run the following to trigger <code>bob</code> locking <code>100</code> units of <code>token1</code> for <code>alice</code> in <code>network2</code>:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli asset exchange lock --fungible --timeout-duration</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">1800</span><span class="token plain"> --locker</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bob --recipient</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">alice --hashBase64</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">ivHErp1x4bJDKuRo6L5bApO/DdoyD/dG0mAZrzLZEIs</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> --target-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network2 --param</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">token1:100</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div>Note the <code>contract-id</code> printed as output in above command. The output line containing <code>contract-id</code> (text in base64 after <code>Contract Id:</code>) would like this:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">â„¹ Fungible Asset Locked with Contract Id: E0JZq8Z+eS//2Bt4WU0pU210MvNgDC2hdUT1RgszOq0</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">, preimage: null, hashvalue: ivHErp1x4bJDKuRo6L5bApO/DdoyD/dG0mAZrzLZEIs</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>Run the following to verify <code>bob</code>&#x27;s lock:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli asset exchange is-locked --fungible --locker</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bob --recipient</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">alice --target-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network2 --contract-id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">contract-id</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>Run the following to trigger <code>alice</code>&#x27;s claim for <code>100</code> units of <code>token1</code> locked by <code>bob</code> in <code>network2</code>:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli asset exchange claim --fungible --recipient</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">alice --target-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network2 --contract-id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">contract-id</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> --secret</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">hash-pre-image</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>Run the following to trigger <code>bob</code>&#x27;s claim for <code>bond01:a03</code> locked by <code>alice</code> in <code>network1</code>:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli asset exchange claim --recipient</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bob --locker</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">alice --target-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network1 --param</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bond01:a03 --secret</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">hash-pre-image</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul>The above steps complete a successful asset exchange between two Fabric networks.
In addition to the above commands, following commands can be run if specified timeout has expired and the locked asset remains unclaimed.<ul><li>If <code>alice</code> wants to unlock the bond asset, run the following to trigger <code>alice</code>&#x27;s re-claim for <code>bond01:a03</code> locked in <code>network1</code>:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli asset exchange unlock --locker</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">alice --recipient</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bob --target-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network1 --param</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bond01:a03</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>If <code>bob</code> wants to unlock the token asset, run the following to trigger <code>bob</code>&#x27;s re-claim for <code>token1:100</code> locked in <code>network2</code>:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli asset exchange unlock --fungible --locker</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bob --target-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network2 --contract-id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">contract-id</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul></li></ul></li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="fabric-with-corda">Fabric with Corda<a aria-hidden="true" class="hash-link" href="#fabric-with-corda" title="Direct link to heading">â€‹</a></h2><p>We will demonstrate asset exchange of a bond in Fabric <code>network1</code> with tokens on <code>Corda_Network</code>.
For Fabric commands, run from <code>samples/fabric/fabric-cli</code> folder, and for Corda commands, run from <code>samples/corda/corda-simple-application</code> folder. Here <code>Alice</code> and <code>Bob</code> in Fabric <code>network1</code> correspond to <code>PartyA</code> (<code>CORDA_PORT=10006</code>) and <code>PartyB</code> (<code>CORDA_PORT=10009</code>) in <code>Corda_Network</code> respectively. Following are the step-by-step asset exchange process:</p><table><thead><tr><th align="left">Notes</th></tr></thead><tbody><tr><td align="left">The hash used in following steps can be replaced by any valid <code>SHA256</code> hash.</td></tr></tbody></table><ul><li>Run the following to verify the status of the bond assets owned by <code>alice</code> and <code>bob</code> in the Fabric network <code>network1</code> from <code>samples/fabric/fabric-cli</code> folder:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./scripts/getAssetStatus.sh</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>Run the following to verify the status of the assets owned by <code>PartyA</code> and <code>PartyB</code> in the <code>Corda_Network</code> from <code>samples/corda/corda-simple-application</code> folder:</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./scripts/getAssetStatus.sh</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>Generate Secret-Hash Pair using following command (prints hash in base64):<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli hash --hash_fn=SHA256 secrettext</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>Run the following to trigger <code>alice</code> locking <code>bond01:a03</code> for <code>bob</code> in <code>network1</code> for 60 mins:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli asset exchange lock --timeout-duration</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">3600</span><span class="token plain"> --locker</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">alice --recipient</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bob --hashBase64</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">ivHErp1x4bJDKuRo6L5bApO/DdoyD/dG0mAZrzLZEIs</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> --target-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network1 --param</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bond01:a03</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>Run the following to verify <code>alice</code>&#x27;s lock:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli asset exchange is-locked --locker</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">alice --recipient</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bob --target-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network1 --param</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bond01:a03</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>Run the following to trigger <code>PartyB</code> locking <code>50</code> units of token type <code>t1</code> for <code>PartyA</code> in <code>Corda_Network</code> for 30 mins:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">CORDA_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">10009</span><span class="token plain"> ./clients/build/install/clients/bin/clients lock-asset --fungible --hashBase64</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">ivHErp1x4bJDKuRo6L5bApO/DdoyD/dG0mAZrzLZEIs</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> --timeout</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">1800</span><span class="token plain"> --recipient</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;O=PartyA,L=London,C=GB&quot;</span><span class="token plain"> --param</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">t1:50</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div>Note the <code>contract-id</code> displayed after successful execution of the command, will be used in next steps. The output containing <code>contract-id</code> would like this:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">HTLC Lock State created with contract ID Right</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">b</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">10448674_80d2bee7-5a5d-45df-b14e-60bac4ba1bf3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><code>contract-id</code> is the alphanumeric text (with underscore and hyphens) after <code>b=</code> within parenthesis.</li><li>Run the following to verify <code>PartyB</code>&#x27;s lock (can be verified by both parties):<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">CORDA_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">10006</span><span class="token plain"> ./clients/build/install/clients/bin/clients is-asset-locked --contract-id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">contract-id</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>Run the following to trigger <code>PartyA</code>&#x27;s claim for <code>50</code> units of token type <code>t1</code> locked by <code>PartyB</code> in <code>Corda_Network</code>:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">CORDA_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">10006</span><span class="token plain"> ./clients/build/install/clients/bin/clients claim-asset --secret</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">secrettext --contract-id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">contract-id</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><code>PartyB</code> can see its node&#x27;s logs to get the revealed hash preimage, and use it to claim the bond in the Fabric network.</li><li>Run the following to trigger <code>bob</code>&#x27;s claim for <code>bond01:a03</code> locked by <code>alice</code> in <code>network1</code>:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli asset exchange claim --recipient</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bob --locker</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">alice --target-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network1 --param</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bond01:a03 --secret</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">secrettext</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>Run the following to verify the status of the bond assets owned by <code>alice</code> and <code>bob</code> in the Fabric network <code>network1</code> from <code>samples/fabric/fabric-cli</code> folder:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./scripts/getAssetStatus.sh</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>Run the following to verify the status of the assets owned by <code>PartyA</code> and <code>PartyB</code> in the <code>Corda_Network</code> from <code>samples/corda/corda-simple-application</code> folder:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./scripts/getAssetStatus.sh</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul><p>The above steps complete a successful asset exchange between Fabric and Corda networks.
In addition to the above commands, following commands can be run if specified timeout has expired and the locked asset remains unclaimed.</p><ul><li>If <code>alice</code> wants to unlock the bond asset, run the following to trigger <code>alice</code>&#x27;s re-claim for <code>bond01:a03</code> locked in <code>network1</code>:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/fabric-cli asset exchange unlock --locker</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">alice --recipient</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bob --target-network</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">network1 --param</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bond01:a03</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>If <code>PartyB</code> wants to unlock the token asset, run the following to trigger unlock for <code>t1:50</code> locked in <code>Corda_Network</code>:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">CORDA_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">10009</span><span class="token plain"> ./clients/build/install/clients/bin/clients unlock-asset --contract-id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">contract-id</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="corda-with-corda">Corda with Corda<a aria-hidden="true" class="hash-link" href="#corda-with-corda" title="Direct link to heading">â€‹</a></h2><p>We will demonstrate asset exchange of a tokens in <code>Corda_Network</code> with tokens on <code>Corda_Network2</code>. Here <code>PartyA</code> (<code>CORDA_PORT=10006</code>) and <code>PartyB</code> (<code>CORDA_PORT=10009</code>) in <code>Corda_Network</code> correspond to <code>PartyA</code> (<code>CORDA_PORT=30006</code>) and <code>PartyB</code> (<code>CORDA_PORT=30009</code>) in <code>Corda_Network2</code> respectively. Following are the step-by-step asset exchange process:</p><table><thead><tr><th align="left">Notes</th></tr></thead><tbody><tr><td align="left">The hash used in following steps can be replaced by any valid <code>SHA256</code> hash.</td></tr></tbody></table><ul><li>Navigate to <code>samples/corda/corda-simple-application</code> folder. </li><li>Run the following to verify the status of the tokens owned by <code>PartyA</code> and <code>PartyB</code> in the <code>Corda_Network</code> and <code>Corda_Network2</code>:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./scripts/getAssetStatus.sh </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>Generate Secret-Hash Pair using following command (prints hash in base64):</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./clients/build/install/clients/bin/clients utils hash --hash-fn=SHA256 -s secrettext</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>Run the following to trigger <code>PartyA</code> locking <code>30</code> units of token type <code>t1</code> for <code>PartyB</code> in <code>Corda_Network</code> for 60 mins:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">CORDA_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">10006</span><span class="token plain"> ./clients/build/install/clients/bin/clients lock-asset --fungible --hashBase64</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">ivHErp1x4bJDKuRo6L5bApO/DdoyD/dG0mAZrzLZEIs</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> --timeout</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">3600</span><span class="token plain"> --recipient</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;O=PartyB,L=London,C=GB&quot;</span><span class="token plain"> --param</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">t1:30</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div>Note the <code>contract-id</code> displayed after successful execution of the command, will be used in next steps. The output containing <code>contract-id</code> would like this:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">HTLC Lock State created with contract ID Right</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">b</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">10448674_80d2bee7-5a5d-45df-b14e-60bac4ba1bf3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><code>contract-id</code> is the alphanumeric text (with underscore and hyphens) after <code>b=</code> within parenthesis. Let&#x27;s denote it <code>&lt;contract-id-1&gt;</code>.</li><li>Run the following to verify <code>PartyA</code>&#x27;s lock (can be verified by both parties):<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">CORDA_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">10009</span><span class="token plain"> ./clients/build/install/clients/bin/clients is-asset-locked --contract-id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">contract-id-</span><span class="token operator file-descriptor important" style="color:rgb(137, 221, 255)">1</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>Run the following to trigger <code>PartyB</code> locking <code>50</code> units of token type <code>t2</code> for <code>PartyA</code> in <code>Corda_Network2</code> for 30 mins:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">CORDA_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">30009</span><span class="token plain"> ./clients/build/install/clients/bin/clients lock-asset --fungible --hashBase64</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">ivHErp1x4bJDKuRo6L5bApO/DdoyD/dG0mAZrzLZEIs</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> --timeout</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">1800</span><span class="token plain"> --recipient</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;O=PartyA,L=London,C=GB&quot;</span><span class="token plain"> --param</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">t2:50</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div>Note the <code>contract-id</code> displayed after successful execution of the command, will be used in next steps. Let&#x27;s denote it <code>&lt;contract-id-2&gt;</code>.</li><li>Run the following to verify <code>PartyB</code>&#x27;s lock (can be verified by both parties):<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">CORDA_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">30006</span><span class="token plain"> ./clients/build/install/clients/bin/clients is-asset-locked --contract-id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">contract-id-</span><span class="token operator file-descriptor important" style="color:rgb(137, 221, 255)">2</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>Run the following to trigger <code>PartyA</code>&#x27;s claim for <code>50</code> units of token type <code>t2</code> locked by <code>PartyB</code> in <code>Corda_Network2</code>:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">CORDA_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">30006</span><span class="token plain"> ./clients/build/install/clients/bin/clients claim-asset --secret</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">secrettext --contract-id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">contract-id-</span><span class="token operator file-descriptor important" style="color:rgb(137, 221, 255)">2</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><code>PartyB</code> can see its node&#x27;s logs to get the revealed hash preimage, and use it to claim the bond in the Fabric network.</li><li>Run the following to trigger <code>PartyB</code>&#x27;s claim for <code>30</code> units of token type <code>t1</code> locked by <code>PartyA</code> in <code>Corda_Network</code>:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">CORDA_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">10009</span><span class="token plain"> ./clients/build/install/clients/bin/clients claim-asset --secret</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">secrettext --contract-id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">contract-id-</span><span class="token operator file-descriptor important" style="color:rgb(137, 221, 255)">1</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>Run the following to verify the status of the tokens owned by <code>PartyA</code> and <code>PartyB</code> in the <code>Corda_Network</code> and <code>Corda_Network2</code>:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./scripts/getAssetStatus.sh </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul><p>The above steps complete a successful asset exchange between two Corda networks.
In addition to the above commands, following commands can be run if specified timeout has expired and the locked asset remains unclaimed.</p><ul><li>If <code>PartyA</code> wants to unlock the token <code>t1:30</code> asset, run the following to trigger <code>PartyA</code>&#x27;s re-claim in <code>Corda_Network</code>:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">CORDA_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">10006</span><span class="token plain"> ./clients/build/install/clients/bin/clients unlock-asset --contract-id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">contract-id-</span><span class="token operator file-descriptor important" style="color:rgb(137, 221, 255)">1</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>If <code>PartyB</code> wants to unlock the token <code>t2:50</code> asset, run the following to trigger <code>PartyB</code>&#x27;s re-claim in <code>Corda_Network2</code>:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">CORDA_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">30009</span><span class="token plain"> ./clients/build/install/clients/bin/clients unlock-asset --contract-id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">contract-id-</span><span class="token operator file-descriptor important" style="color:rgb(137, 221, 255)">2</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/hyperledger-labs/weaver-dlt-interoperability/edit/master/docs/external/getting-started/interop/asset-exchange.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/weaver-dlt-interoperability/docs/external/getting-started/interop/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Testing Interoperation Modes</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/weaver-dlt-interoperability/docs/external/getting-started/enabling-weaver-network/overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Enabling Weaver in Existing DLT Applications<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#fabric-with-fabric" class="table-of-contents__link toc-highlight">Fabric with Fabric</a></li><li><a href="#fabric-with-corda" class="table-of-contents__link toc-highlight">Fabric with Corda</a></li><li><a href="#corda-with-corda" class="table-of-contents__link toc-highlight">Corda with Corda</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Weaver Framework.</div></div></div></footer></div>
<script src="/weaver-dlt-interoperability/assets/js/runtime~main.19d8449f.js"></script>
<script src="/weaver-dlt-interoperability/assets/js/main.43cbafb9.js"></script>
</body>
</html>