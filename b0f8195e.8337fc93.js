(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{107:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return l})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return b}));var i=n(3),r=n(7),a=(n(0),n(133)),o={id:"ledger-initialization",title:"Ledger Initialization"},l={unversionedId:"external/getting-started/test-network/ledger-initialization",id:"external/getting-started/test-network/ledger-initialization",isDocsHomePage:!1,title:"Ledger Initialization",description:"\x3c!--",source:"@site/docs/external/getting-started/test-network/ledger-initialization.md",slug:"/external/getting-started/test-network/ledger-initialization",permalink:"/weaver-dlt-interoperability/docs/external/getting-started/test-network/ledger-initialization",editUrl:"https://github.com/hyperledger-labs/weaver-dlt-interoperability/edit/master/docs/external/getting-started/test-network/ledger-initialization.md",version:"current",sidebar:"Documentation",previous:{title:"Setup with Imported Dockerized Weaver Components",permalink:"/weaver-dlt-interoperability/docs/external/getting-started/test-network/setup-packages-docker"},next:{title:"Advanced Configuration",permalink:"/weaver-dlt-interoperability/docs/external/getting-started/test-network/advanced-configuration"}},c=[{value:"Initializing the Fabric Networks",id:"initializing-the-fabric-networks",children:[{value:"Configuring the Fabric CLI",id:"configuring-the-fabric-cli",children:[]},{value:"Bootstrapping Network and Application State",id:"bootstrapping-network-and-application-state",children:[]}]},{value:"Initializing the Corda Network",id:"initializing-the-corda-network",children:[{value:"Bootstrapping Network and Application State",id:"bootstrapping-network-and-application-state-1",children:[]}]}],p={toc:c};function b(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(a.b)("wrapper",Object(i.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Once the two Fabric networks and the Corda network are up and running along with their associated relays and drivers, we must initialize states in those networks to prepare them for interoperation. For the Fabric networks, this involves recording state in the channel ledgers, and for the Corda network, in the nodes' vaults."),Object(a.b)("h2",{id:"initializing-the-fabric-networks"},"Initializing the Fabric Networks"),Object(a.b)("p",null,"We use the Fabric CLI (",Object(a.b)("inlineCode",{parentName:"p"},"fabric-cli"),") built earlier (in ",Object(a.b)("inlineCode",{parentName:"p"},"samples/fabric/fabric-cli"),") for this purpose."),Object(a.b)("h3",{id:"configuring-the-fabric-cli"},"Configuring the Fabric CLI"),Object(a.b)("p",null,"During bootstrap, the ledgers in both ",Object(a.b)("inlineCode",{parentName:"p"},"network1")," and ",Object(a.b)("inlineCode",{parentName:"p"},"network2")," must be populated with the following information scoped by the interoperation chaincode:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Access control policies governing requests from foreign networks"),Object(a.b)("li",{parentName:"ul"},"Security group info for foreign networks (i.e., identities of network units and their membership providers' certificate chains)"),Object(a.b)("li",{parentName:"ul"},"Verification policies for proofs supplied by foreign networks\nKnowledge of foreign networks that must be configured in this stage is as follows:"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"network1")," has policies and security group info for ",Object(a.b)("inlineCode",{parentName:"li"},"network2")," and ",Object(a.b)("inlineCode",{parentName:"li"},"Corda_Network")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"network2")," has policies and security group info for ",Object(a.b)("inlineCode",{parentName:"li"},"network1")," and ",Object(a.b)("inlineCode",{parentName:"li"},"Corda_Network"),"\n(",Object(a.b)("em",{parentName:"li"},Object(a.b)("inlineCode",{parentName:"em"},"Corda_Network")," will be launched later."),")\nThe ledgers must also be populated with sample key-value pairs for testing interoperation flows, scoped by the sample application chaincode.")),Object(a.b)("p",null,"Prepare ",Object(a.b)("inlineCode",{parentName:"p"},"fabric-cli")," for configuration as follows:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Navigate to the ",Object(a.b)("inlineCode",{parentName:"li"},"samples/fabric/fabric-cli")," folder."),Object(a.b)("li",{parentName:"ul"},"Create a ",Object(a.b)("inlineCode",{parentName:"li"},"config.json")," file by copying the ",Object(a.b)("inlineCode",{parentName:"li"},"config.template.json")," and setting (or adding or removing) suitable values:",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"For each network, the relay port and connection profile paths are specified using the keys ",Object(a.b)("inlineCode",{parentName:"li"},"relayPort")," and ",Object(a.b)("inlineCode",{parentName:"li"},"connProfilePath")," respectively.",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"Replace ",Object(a.b)("inlineCode",{parentName:"li"},"<PATH-TO-WEAVER>")," with the absolute path location of the ",Object(a.b)("inlineCode",{parentName:"li"},"weaver-dlt-interoperability")," clone folder."),Object(a.b)("li",{parentName:"ul"},"Otherwise, leave the default values unchanged."))))),Object(a.b)("li",{parentName:"ul"},"Create a ",Object(a.b)("inlineCode",{parentName:"li"},".env")," file by copying ",Object(a.b)("inlineCode",{parentName:"li"},".env.template")," and setting suitable parameter values:",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"The ",Object(a.b)("inlineCode",{parentName:"li"},"MEMBER_CREDENTIAL_FOLDER")," should refer to the folder containing the credentials (security group and policy info) of all the foreign networks.",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"If you specify a non-existent or new folder, ",Object(a.b)("inlineCode",{parentName:"li"},"fabric-cli")," will automatically generate sample credentials for you in that folder."),Object(a.b)("li",{parentName:"ul"},"For this exercise, simply point to the folder ",Object(a.b)("inlineCode",{parentName:"li"},"src/data/credentials")," (",Object(a.b)("em",{parentName:"li"},"you must specify the full absolute path here"),")."))),Object(a.b)("li",{parentName:"ul"},"The ",Object(a.b)("inlineCode",{parentName:"li"},"CONFIG_PATH")," must point to a JSON file that contains connection info for networks and relays.",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"For this exercise, set the value to ",Object(a.b)("inlineCode",{parentName:"li"},"./config.json"),"."))),Object(a.b)("li",{parentName:"ul"},"Leave the default values unchanged for the other parameters."))),Object(a.b)("li",{parentName:"ul"},"Run the following commands:",Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",{parentName:"pre"},"./bin/fabric-cli env set-file ./.env\n"))),Object(a.b)("li",{parentName:"ul"},"If you haven't assigned a value to the CONFIG_PATH environment variable in .env, then run this:",Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",{parentName:"pre"},"./bin/fabric-cli config set-file ./config.json\n")))),Object(a.b)("p",null,"See the ",Object(a.b)("a",{parentName:"p",href:"#fabric-cli"},"Fabric CLI")," section for more information."),Object(a.b)("h3",{id:"bootstrapping-network-and-application-state"},"Bootstrapping Network and Application State"),Object(a.b)("p",null,"Finally, to prepare both ",Object(a.b)("inlineCode",{parentName:"p"},"network1")," and ",Object(a.b)("inlineCode",{parentName:"p"},"network2")," for interoperation, run:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-bash"},"./bin/fabric-cli configure all network1 network2\n")),Object(a.b)("h2",{id:"initializing-the-corda-network"},"Initializing the Corda Network"),Object(a.b)("p",null,"Once the Corda network is launched, the client application (built earlier) needs to be exercised to generate network (ledger) state in preparation to test interoperation flows."),Object(a.b)("h3",{id:"bootstrapping-network-and-application-state-1"},"Bootstrapping Network and Application State"),Object(a.b)("p",null,"Just as we did for either Fabric network, the Corda network ledger (or ",Object(a.b)("em",{parentName:"p"},"vault")," on each node) must be initialized with access control policies, verification policies, and security group information for the two Fabric networks. Further, sample key-value pairs need to be recorded so we can later share them with a Fabric network via an interoperation flow."),Object(a.b)("p",null,"Bootstrap the Corda network and application states as follows:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Navigate to the ",Object(a.b)("inlineCode",{parentName:"li"},"samples/corda/corda-simple-application")," folder."),Object(a.b)("li",{parentName:"ul"},"Run the following:",Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",{parentName:"pre",className:"language-bash"},"make initialise-vault\n")))))}b.isMDXComponent=!0},133:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return f}));var i=n(0),r=n.n(i);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=r.a.createContext({}),b=function(e){var t=r.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=b(e.components);return r.a.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,o=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),s=b(n),u=i,f=s["".concat(o,".").concat(u)]||s[u]||d[u]||a;return n?r.a.createElement(f,l(l({ref:t},p),{},{components:n})):r.a.createElement(f,l({ref:t},p))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=u;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var p=2;p<a;p++)o[p]=n[p];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);